
var hashiApp=angular.module('hashiApp',['ngRoute','ngMessages','ngResource','cgBusy','flow','ngMap','pascalprecht.translate','ngCookies','angucomplete-alt','ui.router','slick','xeditable','fancyboxplus','ui.bootstrap','angular-loading-bar','ngAnimate','csrf-cross-domain','ngFacebook']);hashiApp.config(function($stateProvider,$urlRouterProvider,$httpProvider,$locationProvider,$translateProvider,$sceDelegateProvider,$facebookProvider){$sceDelegateProvider.resourceUrlWhitelist(['self',new RegExp('^(http[s]?):\/\/(w{3}.)?s3-eu-west-1.amazonaws\.com/.+$')]);$facebookProvider.setAppId('1047915708583706');$httpProvider.defaults.headers.common["X-Requested-With"]='XMLHttpRequest';$translateProvider.useStaticFilesLoader({prefix:'languages/',suffix:'.json'});$translateProvider.use('en_US');$translateProvider.useLocalStorage();$urlRouterProvider.otherwise("/");$stateProvider.state('/',{url:"/",templateUrl:"js/app/partial/home.html",resolve:{promiseFeatured:function getFeaturedProducts(productFactory){return productFactory.getFeaturedProducts();},promiseCities:function initCities(cityFactory){return cityFactory.getCities();},promiseRootCategories:function getRootCategories(categoryFactory){return categoryFactory.getRootCategories();}},controller:"HomeController"}).state('login',{url:"/login",templateUrl:"js/app/partial/login.html",controller:"navigation"}).state('admin',{url:"/admin",templateUrl:"js/app/admin-partial/admin.html",controller:"AdminController"}).state('admin_details',{url:"/admin_details/:productId/:categoryId/:categoryType",templateUrl:"js/app/admin-partial/admin_details.html",controller:"DetailsController",resolve:{promiseProduct:function findProductWithUserByProductId(productFactory,$stateParams){return productFactory.findProductWithUserByProductId($stateParams.productId);},promiseCities:function initializeCities(cityFactory){return cityFactory.getCities();},promiseCategories:function initializeCategoriesLevelOne(categoryFactory){return categoryFactory.getRootCategories();},promiseListRootCategories:function getRootCategoriesByCategoryId(categoryFactory,$stateParams){return categoryFactory.getRootCategoriesByCategoryId($stateParams.categoryId);}}}).state('register',{url:"/register",templateUrl:"js/app/partial/register.html",controller:"RegistrationController"}).state('forgot_password',{url:"/forgot_password",templateUrl:"js/app/partial/forgot_password.html",controller:"ForgotPasswordController"}).state('reset_password',{url:"/reset_password?token",templateUrl:"js/app/partial/reset_password.html",controller:"ResetPasswordController",}).state('success_forgot_password',{url:"/success_forgot_password",templateUrl:"js/app/partial/success_forgot_password.html",}).state('success_reset_password',{url:"/success_reset_password",templateUrl:"js/app/partial/success_reset_password.html",}).state('post_ad',{url:"/post_ad",templateUrl:"js/app/partial/post_ad.html",controller:"PostAdController",resolve:{promiseRootCategories:function getRootCategories(categoryFactory){return categoryFactory.getRootCategories();}}}).state('post_ad_job',{url:"/post_ad_job/:categoryId",templateUrl:"js/app/partial/post_ad_job.html",controller:"PostAdJobController",params:{productId:null}}).state('applicants',{url:"/applicants",templateUrl:"js/app/partial/applicants.html",controller:"ApplicantController",resolve:{promiseObj:function hasUserPostedJobs(applicantFactory,auth){if(auth){if(auth.authenticated){return applicantFactory.hasUserPostedJobs(auth.authenticatedUserId);}}}}}).state('post_ad_car',{url:"/post_ad_car/:categoryId",templateUrl:"js/app/partial/post_ad_car.html",controller:"PostAdCarController",params:{productId:null}}).state('post_ad_heavy_vehicle',{url:"/post_ad_heavy_vehicle/:categoryId",templateUrl:"js/app/partial/post_ad_heavy_vehicle.html",controller:"PostAdHeavyVehicleController",params:{productId:null}}).state('post_ad_car_parts',{url:"/post_ad_car_parts/:categoryId",templateUrl:"js/app/partial/post_ad_car_parts.html",controller:"PostAdCarPartsController",params:{productId:null}}).state('post_ad_boats',{url:"/post_ad_boats/:categoryId",templateUrl:"js/app/partial/post_ad_boats.html",controller:"PostAdBoatsController",params:{productId:null}}).state('post_ad_motorcycle',{url:"/post_ad_motorcycle/:categoryId",templateUrl:"js/app/partial/post_ad_motorcycle.html",controller:"PostAdMotorCycleController",params:{productId:null}}).state('post_ad_sale_res',{url:"/post_ad_sale_res/:categoryId",templateUrl:"js/app/partial/post_ad_sale_res.html",controller:"PostAdSaleResidentialController",params:{productId:null}}).state('post_ad_sale_comm',{url:"/post_ad_sale_comm/:categoryId",templateUrl:"js/app/partial/post_ad_sale_comm.html",controller:"PostAdSaleCommercialController",params:{productId:null}}).state('post_ad_sale_land',{url:"/post_ad_sale_land/:categoryId",templateUrl:"js/app/partial/post_ad_sale_land.html",controller:"PostAdSaleLandController",params:{productId:null}}).state('post_ad_sale_units',{url:"/post_ad_sale_units/:categoryId",templateUrl:"js/app/partial/post_ad_sale_units.html",controller:"PostAdSaleUnitsController",params:{productId:null}}).state('post_ad_rent_res',{url:"/post_ad_rent_res/:categoryId",templateUrl:"js/app/partial/post_ad_rent_res.html",controller:"PostAdRentResidentialController",params:{productId:null}}).state('post_ad_rent_comm',{url:"/post_ad_rent_comm/:categoryId",templateUrl:"js/app/partial/post_ad_rent_comm.html",controller:"PostAdRentCommercialController",params:{productId:null}}).state('post_ad_rent_room',{url:"/post_ad_rent_room/:categoryId",templateUrl:"js/app/partial/post_ad_rent_room.html",controller:"PostAdRentRoomController",params:{productId:null}}).state('post_ad_rent_hotels',{url:"/post_ad_rent_hotels/:categoryId",templateUrl:"js/app/partial/post_ad_rent_hotels.html",controller:"PostAdRentHotelsController",params:{productId:null}}).state('post_ad_rent_short_term',{url:"/post_ad_rent_short_term/:categoryId",templateUrl:"js/app/partial/post_ad_rent_short_term.html",controller:"PostAdRentShortTermController",params:{productId:null}}).state('post_ad_classified',{url:"/post_ad_classified/:categoryId",templateUrl:"js/app/partial/post_ad_classified.html",controller:"PostAdClassifiedController",params:{productId:null}}).state('post_ad_classified_camera',{url:"/post_ad_classified_camera/:categoryId",templateUrl:"js/app/partial/post_ad_classified_camera.html",controller:"PostAdClassifiedCameraController",params:{productId:null}}).state('post_ad_classified_computer',{url:"/post_ad_classified_computer/:categoryId",templateUrl:"js/app/partial/post_ad_classified_computer.html",controller:"PostAdClassifiedComputerController",params:{productId:null}}).state('post_ad_classified_pets',{url:"/post_ad_classified_pets/:categoryId",templateUrl:"js/app/partial/post_ad_classified_pets.html",controller:"PostAdClassifiedPetsController",params:{productId:null}}).state('post_ad_community',{url:"/post_ad_community/:categoryId",templateUrl:"js/app/partial/post_ad_community.html",controller:"PostAdCommunityController",params:{productId:null}}).state('success_registration',{url:"/success_registration",templateUrl:"js/app/partial/success_registration.html"}).state('success_profile',{url:"/success_profile",templateUrl:"js/app/partial/success_profile.html"}).state('success_ad',{url:"/success_ad/:productId/:categoryId/:categoryLft/:categoryRgt",templateUrl:"js/app/partial/success_ad.html",controller:'SuccessAdController'}).state('register_token',{url:"/register_token?token",controller:'RegisterTokenController',templateUrl:"js/app/partial/register_token.html",}).state('details',{url:"/details/:productId/:categoryId/:categoryType",templateUrl:"js/app/partial/details.html",controller:'DetailsController',resolve:{promiseProduct:function findProductWithUserByProductId(productFactory,$stateParams){return productFactory.findProductWithUserByProductId($stateParams.productId);},promiseCities:function initializeCities(cityFactory){return cityFactory.getCities();},promiseCategories:function initializeCategoriesLevelOne(categoryFactory){return categoryFactory.getRootCategories();},promiseListRootCategories:function getRootCategoriesByCategoryId(categoryFactory,$stateParams){return categoryFactory.getRootCategoriesByCategoryId($stateParams.categoryId);}}}).state('details_job',{url:"/details_job/:productId/:categoryId/:categoryType",templateUrl:"js/app/partial/details_job.html",controller:'DetailsController',resolve:{promiseProduct:function findProductWithUserByProductId(productFactory,$stateParams){return productFactory.findProductWithUserByProductId($stateParams.productId);},promiseCities:function initializeCities(cityFactory){return cityFactory.getCities();},promiseCategories:function initializeCategoriesLevelOne(categoryFactory){return categoryFactory.getRootCategories();},promiseListRootCategories:function getRootCategoriesByCategoryId(categoryFactory,$stateParams){return categoryFactory.getRootCategoriesByCategoryId($stateParams.categoryId);}}}).state('account_ads',{url:"/account_ads",templateUrl:"js/app/partial/account_ads.html",controller:'AccountAdsController',resolve:{promiseObj:function hasUserPostedJobs(productFactory,auth){if(auth){if(auth.authenticated){return productFactory.findProductsByUserId(auth.authenticatedUserId);}}}}}).state('account_settings',{url:"/account_settings",templateUrl:"js/app/partial/account_settings.html",controller:'AccountSettingsController'}).state('account_profile',{url:"/account_profile",templateUrl:"js/app/partial/account_profile.html",controller:'AccountProfileController'}).state('listing',{url:"/listing",params:{searchType:null,basicSelectedCategoryId:null,basicSearchText:null,basicSelectedCityId:null,advSelectedCityId:null,advFinalSelectedCategoryId:null,advSelectedCategoryIdLevelOne:null,advSelectedCategoryIdLevelTwo:null,advSelectedCategoryIdLevelThree:null,advSelectedCategoryIdLevelFour:null,advSearchText:null,advPriceFrom:null,advPriceTo:null,advYearMin:null,advYearMax:null,advKMFrom:null,advKMTo:null,advSellerType:null,advBedroomMin:null,advBedroomMax:null},templateUrl:"js/app/partial/listings.html",controller:"ListingController"}).state('about_us',{url:"/about_us",templateUrl:"js/app/partial/about_us.html",}).state('contact_us',{url:"/contact_us",templateUrl:"js/app/partial/contact_us.html",}).state('career',{url:"/career",templateUrl:"js/app/partial/career.html",}).state('help',{url:"/help",templateUrl:"js/app/partial/help.html",}).state('error',{url:"/error",templateUrl:"js/app/partial/error.html",controller:'PostAdBoatsController'});});hashiApp.run(function(auth,$rootScope,$state,editableOptions,$http,$location,$window){$window.ga('create','UA-71087645-1','auto');$rootScope.$on('$stateChangeSuccess',function(){document.body.scrollTop=document.documentElement.scrollTop=0;$window.ga('send','pageview',$location.path());});auth.init('/','login','logout');editableOptions.theme='bs3';if(document.getElementById('facebook-jssdk')){return;}
var firstScriptElement=document.getElementsByTagName('script')[0];var facebookJS=document.createElement('script');facebookJS.id='facebook-jssdk';facebookJS.src='//connect.facebook.net/en_US/all.js';firstScriptElement.parentNode.insertBefore(facebookJS,firstScriptElement);});var hashiApp=angular.module('hashiApp')
hashiApp.controller('LanguageController',['$scope','$translate','$state',function($scope,$translate,$state){$scope.switchLanguage=function(key){$translate.use(key).then(function(){$state.reload();});};$scope.getCurrentLanguage=function(){return $translate.use();};}]);var hashiApp=angular.module('hashiApp')
hashiApp.controller('navigation',function($scope,auth,$http,$state){$scope.credentials={};$scope.loginMessage="";$scope.loginError=false;var urlBase='http://xaashi-somalia-rest.cfapps.io/login';$scope.authenticated=function(){return auth.authenticated;}
$scope.authenticatedFirstanme=function(){return auth.authenticatedFirstname;}
$scope.authenticatedUserId=function(){return auth.authenticatedUserId;}
$scope.login=function(valid){if(valid){$scope.myPromise=auth.authenticate($scope.credentials,function(authenticated){if(authenticated){$scope.loginError=false;}else{$scope.loginMessage="There was a problem logging in. Please try again.";$scope.loginError=true;}})}}
$scope.socialLogin=function(){$scope.myPromise=auth.socialAuthenticate(function(authenticated){if(authenticated){$scope.loginError=false;}else{$scope.loginMessage="There was a problem logging in. Please try again.";$scope.loginError=true;}})}
$scope.logout=function(){auth.clear();}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('HomeController',function($scope,$http,$translate,cityFactory,bucketName,$location,categoryFactory,categoryRange,$state,productFactory,promiseFeatured,searchTypeConstant,categoryIdConstant,sellerTypeSearchEnglish,sellerTypeSearchSomali,noBedroomsApartmentEnglish,noBedroomsApartmentSomali,dispatcherDetailsFactory,promiseCities,promiseRootCategories,$rootScope){$scope.listFeatured=null;$scope.listCities=null;$scope.basicSelectedCategory=2;$scope.basicSelectedCityId=0;$scope.basicTextSearch=null;$scope.advSelectedCityId=0;$scope.advTextSearch=null;$scope.advCategoryLevelOneObject=[];$scope.advCategoryLevelTwoObject=[];$scope.advCategoryLevelThreeObject=[];$scope.advCategoryLevelFourObject=[];$scope.advFinalSelectedCategoryId=0;$scope.advSelectedCategoryIdLevelOne=2;$scope.advSelectedCategoryIdLevelTwo=0;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.showSubCategoryLevelOne=false;$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.years=[];$scope.yearForm;$scope.priceFrom;$scope.priceTo;$scope.yearMin;$scope.yearMax;$scope.KMFrom;$scope.KMTo;$scope.bedroomMin;$scope.bedroomMax;$scope.selectedSellerType=0;$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRommDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;$scope.bucketName=bucketName;(function init(){$scope.listCities=promiseCities.data;$scope.listFeatured=promiseFeatured.data;$scope.categories=promiseRootCategories.data;$scope.advCategoryLevelOneObject=$scope.categories[0];if($translate.use()==='so_SO'){$scope.listSellerTypes=sellerTypeSearchSomali;$scope.constantNoBedrooms=noBedroomsApartmentSomali;}
if($translate.use()==='en_US'){$scope.listSellerTypes=sellerTypeSearchEnglish;$scope.constantNoBedrooms=noBedroomsApartmentEnglish;}
initializeCountProducts();})();$scope.basicSearch=function(){$state.go('listing',{searchType:'BasicSearch',basicSelectedCityId:$scope.basicSelectedCityId,basicSelectedCategoryId:$scope.basicSelectedCategory,basicSearchText:$scope.basicTextSearch});}
$scope.advanceSearch=function(){$state.go('listing',{searchType:typeOfAdvanceSearch(),advSelectedCityId:$scope.advSelectedCityId,advFinalSelectedCategoryId:$scope.advFinalSelectedCategoryId,advSelectedCategoryIdLevelOne:$scope.advSelectedCategoryIdLevelOne,advSelectedCategoryIdLevelTwo:$scope.advSelectedCategoryIdLevelTwo,advSelectedCategoryIdLevelThree:$scope.advSelectedCategoryIdLevelThree,advSelectedCategoryIdLevelFour:$scope.advSelectedCategoryIdLevelFour,advSearchText:$scope.advTextSearch,advPriceFrom:$scope.priceFrom,advPriceTo:$scope.priceTo,advYearMin:$scope.yearMin,advYearMax:$scope.yearMax,advKMFrom:$scope.KMFrom,advKMTo:$scope.KMTo,advSellerType:$scope.selectedSellerType,advBedroomMin:$scope.bedroomMin,advBedroomMax:$scope.bedroomMax,basicSearchText:$scope.basicTextSearch,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,yearMin:$scope.yearMin,yearMax:$scope.yearMax});}
$scope.getSubCategoriesLevelTwo=function(category){hideAdvanceSearchDiv(category.categoryId);$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelTwo=0;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelTwo=[];$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelOne=category.categoryId;categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelTwo=categ;$scope.advCategoryLevelTwoObject=$scope.listSubCategoriesLevelTwo[0];$scope.advSelectedCategoryIdLevelTwo=$scope.listSubCategoriesLevelTwo[0].categoryId;$scope.showSubCategoryLevelTwo=true;}});}
$scope.getSubCategoriesLevelThree=function(category){$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];if(category){hideAdvanceSearchDiv(category.categoryId);showAdvanceSearchDiv(category.categoryId);if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelTwo=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelOne;$scope.advSelectedCategoryIdLevelTwo=$scope.advSelectedCategoryIdLevelOne;}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelThree=categ;$scope.advCategoryLevelThreeObject=$scope.listSubCategoriesLevelThree[0];$scope.advSelectedCategoryIdLevelThree=$scope.listSubCategoriesLevelThree[0].categoryId;$scope.showSubCategoryLevelThree=true;}});}}
$scope.getSubCategoriesLevelFour=function(category){$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelFour=[];if(category){if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelThree=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelTwo;$scope.advSelectedCategoryIdLevelThree=$scope.advSelectedCategoryIdLevelTwo;}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelFour=categ;$scope.advCategoryLevelFourObject=$scope.listSubCategoriesLevelFour[0];$scope.advSelectedCategoryIdLevelFour=$scope.listSubCategoriesLevelFour[0].categoryId;$scope.showSubCategoryLevelFour=true;}});}}
$scope.getSubCategoriesLevelFive=function(category){if(category){if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelFour=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelThree;$scope.advSelectedCategoryIdLevelFour=$scope.advSelectedCategoryIdLevelThree;}}}
function initializeCategoriesLevelOne(){categoryFactory.getRootCategories().success(function(data){$scope.categories=data;$scope.advCategoryLevelOneObject=$scope.categories[0];});}
function initializeCities(){cityFactory.getCities().success(function(data){$scope.listCities=data;});}
function initializeYears(){if($scope.years.length==0){var currentYear=new Date().getFullYear();var range=[];for(var i=1900;i<currentYear+2;i++){console.log("lopping"+i);range.push(i);}
$scope.years=range;$scope.yearMax=currentYear+1;}
return;}
function showAdvanceSearchDiv(categoryId){if(categoryId==categoryIdConstant.CAR_CATEGORY_ID){initializeYears();$scope.showAdvanceSearchCarDiv=true;return;}
else if(categoryId==categoryIdConstant.CAR_PARTS_CATEGORY_ID){$scope.showAdvanceSearchCarPartsDiv=true;return;}else if(categoryId==categoryIdConstant.BOATS_CATEGORY_ID){$scope.showAdvanceSearchBoatsDiv=true;return;}else if(categoryId==categoryIdConstant.HEAVY_VEHICLE_CATEGORY_ID){$scope.showAdvanceSearchHeavyVehicleDiv=true;return;}else if(categoryId==categoryIdConstant.MOTORCYCLES_CATEGORY_ID){$scope.showAdvanceSearchMotorcycleDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_RES_CATEGORY_ID){$scope.showAdvanceSearchSaleResDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_COMM_CATEGORY_ID){$scope.showAdvanceSearchSaleCommDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_UNITS_CATEGORY_ID){$scope.showAdvanceSearchSaleUnitsDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_LAND_CATEGORY_ID){$scope.showAdvanceSearchSaleLandDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_RES_CATEGORY_ID){$scope.showAdvanceSearchRentResDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_COMM_CATEGORY_ID){$scope.showAdvanceSearchRentCommDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_ROOM_CATEGORY_ID){$scope.showAdvanceSearchRentRoomDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_HOTEL_CATEGORY_ID){$scope.showAdvanceSearchRentHotelDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID){$scope.showAdvanceSearchRentShortMonthlyDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_TV_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else{$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;return;}}
function hideAdvanceSearchDiv(categoryId){$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;}
function typeOfAdvanceSearch(){if($scope.showAdvanceSearchCarDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CAR;}else if($scope.showAdvanceSearchCarPartsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS;}else if($scope.showAdvanceSearchBoatsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_BOATS;}else if($scope.showAdvanceSearchHeavyVehicleDiv==true){return searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE;}else if($scope.showAdvanceSearchMotorcycleDiv==true){return searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE;}else if($scope.showAdvanceSearchSaleResDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_RES;}else if($scope.showAdvanceSearchSaleCommDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_COMM;}else if($scope.showAdvanceSearchSaleUnitsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS;}else if($scope.showAdvanceSearchSaleLandDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_LAND;}else if($scope.showAdvanceSearchRentResDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_RES;}else if($scope.showAdvanceSearchRentCommDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_COMM;}else if($scope.showAdvanceSearchRentRoomDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM;}else if($scope.showAdvanceSearchRentHotelDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL;}else if($scope.showAdvanceSearchRentShortMonthlyDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY;}else if($scope.showAdvanceSearchClassifiedDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED;}
return searchTypeConstant.ADVANCE_SEARCH;}
$scope.forwardToDetailsPage=function(productId,categoryId,categoryLft,categoryRgt){dispatcherDetailsFactory.forwardToDetailsPage(productId,categoryId,categoryLft,categoryRgt);}
function initializeCountProducts(){countProductsAvailableByCategoryId(21,0);countProductsAvailableByCategoryId(22,0);countProductsAvailableByCategoryId(23,0);countProductsAvailableByCategoryId(24,0);countProductsAvailableByCategoryId(25,0);countProductsAvailableByCategoryId(categoryIdConstant.SALE_RES_APARTMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.SALE_RES_VILLA_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.SALE_COMM_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.SALE_UNITS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.SALE_LAND_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_RES_APARTMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_RES_VILLA_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_COMM_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_ROOM_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_HOTEL_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_ACCOUNTING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_AUTOMOTIVE_ENGINEERING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_MEDIA_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_PUBLIC_RELATIONS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_BANKING_FINANCE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_MARKETING_ADVERTISING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_AIRLINES_AVIATION_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_ART_ENTERTAINMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_INTERIOR_DESIGN_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_BEAUTY_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_BUSINESS_DEVELOPMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_BUSINESS_SUPPLIES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_CONSULTING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_CONSTRUCTION_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_CUSTOMER_SERVICE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_EDUCATION_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_ENGINEERING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_ENV_SERVICES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_EVENT_MANAGEMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_EXECUTIVE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_FASHION_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_FOOD_BEVERAGE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_GOV_ADMIN_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_GRAPHIC_DESIGN_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_HOSPITALITY_RESTAURANT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.JOB_HR_RECRUITMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_TV_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_ELECTRONICS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_FURNITURE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_GAMING_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_HOME_APPLIANCES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_WOMEN_JEWELRY_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_WATCHES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_LOST_FOUND_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_MISC_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_MOBILE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_TICKETS_VOUCHERS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_PETS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_SPORTS_EQUIPMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.CLASSIFIED_TOYS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_FREE_STUFF_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_ARTIST_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_CAR_LIFT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_CHARITIES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_CHILDCARE_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_CLASSES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_ANNOUNCEMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_EDUCATION_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_FREELANCERS_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_ISLAM_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_BUSINESS_ADVERTISMENT_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_PHOTOGRAPHY_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_SERVICES_CATEGORY_ID,0);countProductsAvailableByCategoryId(categoryIdConstant.COMMUNITY_SPORTS_CATEGORY_ID,0);}
function countProductsAvailableByCategoryId(categoryId,cityId){productFactory.countProductsByCategoryId(categoryId,cityId).success(function(data){if(categoryId==categoryIdConstant.CAR_CATEGORY_ID){$rootScope.countCars=data;return;}else if(categoryId==categoryIdConstant.BOATS_CATEGORY_ID){$rootScope.countBoats=data;return;}else if(categoryId==categoryIdConstant.CAR_PARTS_CATEGORY_ID){$rootScope.countCarParts=data;return;}else if(categoryId==categoryIdConstant.HEAVY_VEHICLE_CATEGORY_ID){$rootScope.countHeavyVehicles=data;return;}
else if(categoryId==categoryIdConstant.MOTORCYCLES_CATEGORY_ID){$rootScope.countMotorcycles=data;return;}
else if(categoryId==categoryIdConstant.SALE_RES_APARTMENT_CATEGORY_ID){$rootScope.countSaleResApartment=data;return;}
else if(categoryId==categoryIdConstant.SALE_RES_VILLA_CATEGORY_ID){$rootScope.countSaleResVilla=data;return;}
else if(categoryId==categoryIdConstant.SALE_COMM_CATEGORY_ID){$rootScope.countSaleComm=data;return;}
else if(categoryId==categoryIdConstant.SALE_UNITS_CATEGORY_ID){$rootScope.countSaleUnits=data;return;}
else if(categoryId==categoryIdConstant.SALE_LAND_CATEGORY_ID){$rootScope.countSaleLand=data;return;}
else if(categoryId==categoryIdConstant.RENT_RES_APARTMENT_CATEGORY_ID){$rootScope.countRentResApartment=data;return;}
else if(categoryId==categoryIdConstant.RENT_RES_VILLA_CATEGORY_ID){$rootScope.countRentResVilla=data;return;}
else if(categoryId==categoryIdConstant.RENT_COMM_CATEGORY_ID){$rootScope.countRentComm=data;return;}
else if(categoryId==categoryIdConstant.RENT_ROOM_CATEGORY_ID){$rootScope.countRentRoom=data;return;}
else if(categoryId==categoryIdConstant.RENT_HOTEL_CATEGORY_ID){$rootScope.countRentShortDaily=data;return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID){$rootScope.countRentShortMonthly=data;return;}
else if(categoryId==categoryIdConstant.JOB_MEDIA_CATEGORY_ID){$rootScope.countJobMedia=data;return;}
else if(categoryId==categoryIdConstant.JOB_PUBLIC_RELATIONS_CATEGORY_ID){$rootScope.countJobPublicRelations=data;return;}
else if(categoryId==categoryIdConstant.JOB_ACCOUNTING_CATEGORY_ID){$rootScope.countJobAccounting=data;return;}
else if(categoryId==categoryIdConstant.JOB_AUTOMOTIVE_ENGINEERING_CATEGORY_ID){$rootScope.countJobAutomotiveEngineering=data;return;}
else if(categoryId==categoryIdConstant.JOB_MARKETING_ADVERTISING_CATEGORY_ID){$rootScope.countJobMarkettingAdvertising=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID){$rootScope.countClassifiedBabyItems=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID){$rootScope.countClassifiedBooks=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID){$rootScope.countClassifiedBusinessIndustrial=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID){$rootScope.countClassifiedCamera=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID){$rootScope.countClassifiedClothing=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_ID){$rootScope.countClassifiedCollectibles=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID){$rootScope.countClassifiedComputerNetwork=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_TV_CATEGORY_ID){$rootScope.countClassifiedTV=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_ELECTRONICS_CATEGORY_ID){$rootScope.countClassifiedElectronics=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_FURNITURE_CATEGORY_ID){$rootScope.countClassifiedFurniture=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_GAMING_CATEGORY_ID){$rootScope.countClassifiedGaming=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_HOME_APPLIANCES_CATEGORY_ID){$rootScope.countClassifiedHomeAppliances=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_WATCHES_CATEGORY_ID){$rootScope.countClassifiedWatches=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_WOMEN_JEWELRY_CATEGORY_ID){$rootScope.countClassifiedWomenJewelry=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_LOST_FOUND_CATEGORY_ID){$rootScope.countCommunityLostFound=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_MISC_CATEGORY_ID){$rootScope.countClassifiedMisc=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_MOBILE_CATEGORY_ID){$rootScope.countClassifiedMobile=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_PETS_CATEGORY_ID){$rootScope.countClassifiedPets=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_SPORTS_EQUIPMENT_CATEGORY_ID){$rootScope.countClassifiedSportsEquipment=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_TICKETS_VOUCHERS_CATEGORY_ID){$rootScope.countClassifiedTicketsVouchers=data;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_TOYS_CATEGORY_ID){$rootScope.countClassifiedToys=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_ARTIST_CATEGORY_ID){$rootScope.countCommunityArtist=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_CAR_LIFT_CATEGORY_ID){$rootScope.countCommunityCarLift=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_CHARITIES_CATEGORY_ID){$rootScope.countCommunityCharities=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_CHILDCARE_CATEGORY_ID){$rootScope.countCommunityChildCare=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_CLASSES_CATEGORY_ID){$rootScope.countCommunityClasses=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_ANNOUNCEMENT_CATEGORY_ID){$rootScope.countCommunityAnnouncement=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_EDUCATION_CATEGORY_ID){$rootScope.countCommunityEducation=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_FREELANCERS_CATEGORY_ID){$rootScope.countCommunityFreelancers=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_ISLAM_CATEGORY_ID){$rootScope.countCommunityIslam=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_BUSINESS_ADVERTISMENT_CATEGORY_ID){$rootScope.countCommunityBusinessAdvertisement=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_PHOTOGRAPHY_CATEGORY_ID){$rootScope.countCommunityPhotography=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_SERVICES_CATEGORY_ID){$rootScope.countCommunityServices=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_SPORTS_CATEGORY_ID){$rootScope.countCommunitySports=data;return;}
else if(categoryId==categoryIdConstant.COMMUNITY_FREE_STUFF_CATEGORY_ID){$rootScope.countCommunityFreeStuff=data;return;}
else if(categoryId==categoryIdConstant.JOB_AIRLINES_AVIATION_CATEGORY_ID){$rootScope.countJobAirlinesAviation=data;return;}
else if(categoryId==categoryIdConstant.JOB_ART_ENTERTAINMENT_CATEGORY_ID){$rootScope.countJobArtEntertainment=data;return;}
else if(categoryId==categoryIdConstant.JOB_INTERIOR_DESIGN_CATEGORY_ID){$rootScope.countJobInteriorDesign=data;return;}
else if(categoryId==categoryIdConstant.JOB_BANKING_FINANCE_CATEGORY_ID){$rootScope.countJobBankingFinance=data;return;}
else if(categoryId==categoryIdConstant.JOB_BEAUTY_CATEGORY_ID){$rootScope.countJobBeauty=data;return;}
else if(categoryId==categoryIdConstant.JOB_BUSINESS_DEVELOPMENT_CATEGORY_ID){$rootScope.countJobBusinessDevelopment=data;return;}
else if(categoryId==categoryIdConstant.JOB_BUSINESS_SUPPLIES_CATEGORY_ID){$rootScope.countJobBusinessSupplies=data;return;}
else if(categoryId==categoryIdConstant.JOB_CONSTRUCTION_CATEGORY_ID){$rootScope.countJobConstruction=data;return;}
else if(categoryId==categoryIdConstant.JOB_CONSULTING_CATEGORY_ID){$rootScope.countJobConsulting=data;return;}
else if(categoryId==categoryIdConstant.JOB_CUSTOMER_SERVICE_CATEGORY_ID){$scope.countJobCustomerService=data;return;}
else if(categoryId==categoryIdConstant.JOB_EDUCATION_CATEGORY_ID){$rootScope.countJobEducation=data;return;}
else if(categoryId==categoryIdConstant.JOB_ENGINEERING_CATEGORY_ID){$rootScope.countJobEngineering=data;return;}
else if(categoryId==categoryIdConstant.JOB_ENV_SERVICES_CATEGORY_ID){$rootScope.countJobEnvServices=data;return;}
else if(categoryId==categoryIdConstant.JOB_EVENT_MANAGEMENT_CATEGORY_ID){$rootScope.countJobEventManagement=data;return;}
else if(categoryId==categoryIdConstant.JOB_EXECUTIVE_CATEGORY_ID){$rootScope.countJobExecutive=data;return;}
else if(categoryId==categoryIdConstant.JOB_FASHION_CATEGORY_ID){$rootScope.countJobFashion=data;return;}
else if(categoryId==categoryIdConstant.JOB_FOOD_BEVERAGE_CATEGORY_ID){$rootScope.countJobFoodBeverage=data;return;}
else if(categoryId==categoryIdConstant.JOB_GOV_ADMIN_CATEGORY_ID){$rootScope.countJobGovAdmin=data;return;}
else if(categoryId==categoryIdConstant.JOB_GRAPHIC_DESIGN_CATEGORY_ID){$rootScope.countJobGraphicDesign=data;return;}
else if(categoryId==categoryIdConstant.JOB_HOSPITALITY_RESTAURANT_CATEGORY_ID){$rootScope.countJobHospitalityRestaurant=data;return;}
else if(categoryId==categoryIdConstant.JOB_HR_RECRUITMENT_CATEGORY_ID){$rootScope.countJobHRRecruitment=data;return;}});}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('RegisterTokenController',function($scope,$state,tokenFactory,$stateParams){$scope.tokenMessage="";$scope.tokenError=false;console.log('$stateParams'+$stateParams.token);tokenFactory.registerToken($stateParams.token).success(function(response){$scope.tokenError=false;}).error(function(error){$scope.tokenError=true;$scope.tokenMessage=error.message;});});var hashiApp=angular.module('hashiApp')
hashiApp.factory('auth',function($rootScope,$http,$state,$facebook,$q){var urlBase='http://xaashi-somalia-rest.cfapps.io/user';var auth={authenticated:false,authenticatedFirstname:null,authenticatedTelephone:null,authenticatedEmail:null,authenticatedUserId:null,loginPath:'login',logoutPath:'logout',homePath:'/',registerPath:'register',listingPath:'listing/*',initializePath:true,authenticate:function(credentials,callback){var def=$q.defer();var headers=credentials?{authorization:"Basic "
+btoa(credentials.username+":"+credentials.password)}:{};$http.get(urlBase+'/user',{headers:headers}).success(function(data){if(data.name){auth.authenticated=true;auth.authenticatedFirstname=data.principal.firstname;auth.authenticatedEmail=data.principal.username;auth.authenticatedUserId=data.principal.userId;auth.authenticatedTelephone=data.principal.telephone;$state.go(auth.path==auth.loginPath?auth.homePath:auth.path);def.resolve(data);}else{auth.authenticated=false;}
callback&&callback(auth.authenticated);def.resolve(data);}).error(function(){auth.authenticated=false;callback&&callback(false);def.reject("Failed to authenticate");});return def.promise;},socialAuthenticate:function(callback){var def=$q.defer();$facebook.getLoginStatus().then(function(response){if(response.status==='connected'){$http.get(urlBase+'/loginSocial/'+
$facebook.getAuthResponse().accessToken).success(function(data,status,headers,config){auth.authenticated=true;auth.authenticatedFirstname=data.firstname;auth.authenticatedEmail=data.username;auth.authenticatedUserId=data.userId;auth.authenticatedTelephone=data.telephone;$state.go(auth.path==auth.loginPath?auth.homePath:auth.path);callback&&callback(auth.authenticated);def.resolve(data);})}else{$facebook.login().then(function(){$facebook.api("/me").then(function(response){$http.get(urlBase+'/loginSocial/'+
$facebook.getAuthResponse().accessToken).success(function(data,status,headers,config){auth.authenticated=true;auth.authenticatedFirstname=data.firstname;auth.authenticatedEmail=data.username;auth.authenticatedUserId=data.userId;auth.authenticatedTelephone=data.telephone;$state.go(auth.path==auth.loginPath?auth.homePath:auth.path);callback&&callback(auth.authenticated);def.resolve(data);})},function(err){console.log('error cancel button');def.reject("Cancel button pressed");})},function(err){console.log('error facebook login');def.reject("error Facebook Login");})}},function(err){console.log('error');});return def.promise;},clear:function(){auth.authenticated=false;auth.initializePath=false;auth.path=auth.loginPath;$http.jsonp('http://xaashi-somalia-rest.cfapps.io/'+auth.logoutPath);$state.go(auth.homePath);},init:function(homePath,loginPath,logoutPath){auth.homePath=homePath;auth.loginPath=loginPath;auth.logoutPath=logoutPath;auth.path=loginPath;$rootScope.$on('$stateChangeStart',function(event,toState,toParams,fromState,fromParams){if(auth.initializePath===true){auth.initializePath=false;if(!auth.authenticated){event.preventDefault();var deferred=$q.defer();$http.get(urlBase+'/user').success(function(data){if(data.name){auth.authenticated=true;auth.authenticatedFirstname=data.principal.firstname;auth.authenticatedEmail=data.principal.username;auth.authenticatedUserId=data.principal.userId;auth.authenticatedTelephone=data.principal.telephone;$state.go(toState.name,toParams);deferred.resolve(data);}else{auth.authenticated=false;if(toState.name==='post_ad'||toState.name==='applicants'||toState.name==='admin'){auth.path=toState.name;if(!auth.authenticated){deferred.resolve(data);$state.go('login');}
else{auth.path=toState.name;deferred.resolve(data);$state.go(toState.name,toParams);}}else{deferred.resolve(data);$state.go(toState.name,toParams);}}});return deferred.promise;}}
if(toState.name==='post_ad'||toState.name==='applicants'||toState.name==='admin'){if(!auth.authenticated){event.preventDefault();auth.path=toState.name;$state.go('login');}}})}}
return auth;});var hashiApp=angular.module('hashiApp')
hashiApp.constant('categoryRange',{MOTOR_MIN:2,MOTOR_MAX:500,MOTOR_CAR_MIN:4,MOTOR_CAR_MAX:200,MOTOR_CAR_PARTS_MIN:249,MOTOR_CAR_PARTS_MAX:400,MOTOR_BOATS_MIN:460,MOTOR_BOATS_MAX:480,MOTOR_HEAVY_VEHICLE_MIN:401,MOTOR_HEAVY_VEHICLE_MAX:420,MOTOR_MOTORCYCLES_MIN:430,MOTOR_MOTORCYCLES_MAX:451,PROPERTY_SALE_MIN:501,PROPERTY_SALE_MAX:700,PROPERTY_SALE_RES_MIN:504,PROPERTY_SALE_RES_MAX:520,PROPERTY_SALE_COMM_MIN:521,PROPERTY_SALE_COMM_MAX:540,PROPERTY_SALE_UNITS_MIN:541,PROPERTY_SALE_UNITS_MAX:560,PROPERTY_SALE_LAND_MIN:561,PROPERTY_SALE_LAND_MAX:590,PROPERTY_RENT_MIN:701,PROPERTY_RENT_MAX:1200,PROPERTY_RENT_RES_MIN:704,PROPERTY_RENT_RES_MAX:720,PROPERTY_RENT_COMM_MIN:721,PROPERTY_RENT_COMM_MAX:740,PROPERTY_RENT_ROOM_MIN:741,PROPERTY_RENT_ROOM_MAX:750,PROPERTY_RENT_SHORT_MONTHLY_MIN:760,PROPERTY_RENT_SHORT_MONTHLY_MAX:770,PROPERTY_RENT_HOTEL_MIN:771,PROPERTY_RENT_HOTEL_MAX:772,CLASSIFIED_MIN:2001,CLASSIFIED_MAX:7999,CLASSIFIED_BABY_ITEMS_MIN:2004,CLASSIFIED_BABY_ITEMS_MAX:2150,CLASSIFIED_BOOKS_MIN:2160,CLASSIFIED_BOOKS_MAX:2350,CLASSIFIED_BUSINESS_INDUSTRIAL_MIN:2351,CLASSIFIED_BUSINESS_INDUSTRIAL_MAX:2650,CLASSIFIED_CAMERA_MIN:2700,CLASSIFIED_CAMERA_MAX:3000,CLASSIFIED_CLOTHING_MIN:3001,CLASSIFIED_CLOTHING_MAX:3300,CLASSIFIED_COMPUTER_NETWORKING_MIN:3600,CLASSIFIED_COMPUTER_NETWORKING_MAX:3899,CLASSIFIED_COMPUTER_MIN:3650,CLASSIFIED_COMPUTER_MAX:3669,CLASSIFIED_TV_MIN:4420,CLASSIFIED_TV_MAX:4449,CLASSIFIED_ELECTRONICS_MIN:4200,CLASSIFIED_ELECTRONICS_MAX:4499,CLASSIFIED_FURNITURE_MIN:4700,CLASSIFIED_FURNITURE_MAX:4999,CLASSIFIED_GAMING_MIN:5000,CLASSIFIED_GAMING_MAX:5299,CLASSIFIED_HOME_APPLIANCES_MIN:5300,CLASSIFIED_HOME_APPLIANCES_MAX:5599,CLASSIFIED_JEWELRY_WATCHES_MIN:5600,CLASSIFIED_JEWELRY_WATCHES_MAX:5999,COMMUNITY_LOST_FOUND_MIN:9033,COMMUNITY_LOST_FOUND_MAX:9300,CLASSIFIED_MISC_MIN:6300,CLASSIFIED_MISC_MAX:6599,CLASSIFIED_MOBILE_MIN:6600,CLASSIFIED_MOBILE_MAX:6899,CLASSIFIED_PETS_MIN:6900,CLASSIFIED_PETS_MAX:7199,CLASSIFIED_SPORTS_EQUIPMENT_MIN:7200,CLASSIFIED_SPORTS_EQUIPMENT_MAX:7499,CLASSIFIED_TOYS_MIN:7600,CLASSIFIED_TOYS_MAX:7699,COMMUNITY_MIN:8000,COMMUNITY_MAX:9999,JOB_MIN:1201,JOB_MAX:2000});hashiApp.constant('categoryName',{MOTOR:'Motor',MOTOR_CAR:'MotorCar',MOTOR_CAR_PARTS:'MotorCarParts',MOTOR_BOATS:'MotorBoats',MOTOR_HEAVY_VEHICLE:'MotorHeavyVehicle',MOTOR_MOTORCYCLES:'Motorcycles',PROPERTY_SALE_RES:'PropertySaleRes',PROPERTY_SALE_COMM:'PropertySaleComm',PROPERTY_SALE_UNITS:'PropertySaleUnits',PROPERTY_SALE_LAND:'PropertySaleLand',PROPERTY_RENT_RES:'PropertyRentRes',PROPERTY_RENT_COMM:'PropertyRentComm',PROPERTY_RENT_ROOM:'PropertyRentRoom',PROPERTY_RENT_HOTEL:'PropertyRentHotel',PROPERTY_RENT_SHORT_MONTHLY:'PropertyRentShortMonthly',CLASSIFIED:'Classified',COMMUNITY:'Community',JOB:'Job'});hashiApp.constant('bucketName',{productImages:'https://s3-eu-west-1.amazonaws.com/xaashi.somalia.product.images/',profileImage:'https://s3-eu-west-1.amazonaws.com/xaashi.somalia.profile.image/',profileCV:'https://s3-eu-west-1.amazonaws.com/xaashi.somalia.profile.cv/',otherImage:'https://s3-eu-west-1.amazonaws.com/xaashi.somalia.other.images/',productLogo:'https://s3-eu-west-1.amazonaws.com/xaashi.somalia.product.logo/'});hashiApp.constant('categoryIdConstant',{MOTOR_CATEGORY_ID:3,CAR_CATEGORY_ID:21,CAR_PARTS_CATEGORY_ID:22,BOATS_CATEGORY_ID:23,HEAVY_VEHICLE_CATEGORY_ID:24,MOTORCYCLES_CATEGORY_ID:25,SALE_RES_CATEGORY_ID:321,SALE_RES_APARTMENT_CATEGORY_ID:327,SALE_RES_VILLA_CATEGORY_ID:326,SALE_COMM_CATEGORY_ID:322,SALE_UNITS_CATEGORY_ID:323,SALE_LAND_CATEGORY_ID:324,RENT_RES_CATEGORY_ID:334,RENT_RES_VILLA_CATEGORY_ID:342,RENT_RES_APARTMENT_CATEGORY_ID:343,RENT_COMM_CATEGORY_ID:335,RENT_ROOM_CATEGORY_ID:336,RENT_HOTEL_CATEGORY_ID:339,RENT_SHORT_MONTHLY_CATEGORY_ID:338,CLASSIFIED_CATEGORY_ID:4,CLASSIFIED_BABY_ITEMS_CATEGORY_ID:555,CLASSIFIED_BOOKS_CATEGORY_ID:609,CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID:667,CLASSIFIED_CAMERA_CATEGORY_ID:765,CLASSIFIED_CLOTHING_CATEGORY_ID:838,CLASSIFIED_COLLECTIBLES_CATEGORY_ID:920,CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID:968,CLASSIFIED_COMPUTER_CATEGORY_ID:972,CLASSIFIED_TV_CATEGORY_ID:1096,CLASSIFIED_ELECTRONICS_CATEGORY_ID:1086,CLASSIFIED_FURNITURE_CATEGORY_ID:1196,CLASSIFIED_GAMING_CATEGORY_ID:1265,CLASSIFIED_HOME_APPLIANCES_CATEGORY_ID:1323,CLASSIFIED_WATCHES_CATEGORY_ID:1371,CLASSIFIED_WOMEN_JEWELRY_CATEGORY_ID:1372,COMMUNITY_LOST_FOUND_CATEGORY_ID:1644,CLASSIFIED_MISC_CATEGORY_ID:1425,CLASSIFIED_MOBILE_CATEGORY_ID:1426,CLASSIFIED_TICKETS_VOUCHERS_CATEGORY_ID:1570,CLASSIFIED_PETS_CATEGORY_ID:1470,CLASSIFIED_SPORTS_EQUIPMENT_CATEGORY_ID:1488,CLASSIFIED_TOYS_CATEGORY_ID:1577,COMMUNITY_CATEGORY_ID:8,COMMUNITY_ACTIVITIES_CATEGORY_ID:1590,COMMUNITY_ARTIST_CATEGORY_ID:1591,COMMUNITY_CAR_LIFT_CATEGORY_ID:1592,COMMUNITY_CHARITIES_CATEGORY_ID:1593,COMMUNITY_CHILDCARE_CATEGORY_ID:1594,COMMUNITY_CLASSES_CATEGORY_ID:1595,COMMUNITY_ANNOUNCEMENT_CATEGORY_ID:1597,COMMUNITY_EDUCATION_CATEGORY_ID:1598,COMMUNITY_FREELANCERS_CATEGORY_ID:1599,COMMUNITY_ISLAM_CATEGORY_ID:1601,COMMUNITY_BUSINESS_ADVERTISMENT_CATEGORY_ID:1602,COMMUNITY_PHOTOGRAPHY_CATEGORY_ID:1603,COMMUNITY_SERVICES_CATEGORY_ID:1604,COMMUNITY_SPORTS_CATEGORY_ID:1605,COMMUNITY_FREE_STUFF_CATEGORY_ID:1620,JOB_ACCOUNTING_CATEGORY_ID:375,JOB_AIRLINES_AVIATION_CATEGORY_ID:376,JOB_INTERIOR_DESIGN_CATEGORY_ID:377,JOB_ART_ENTERTAINMENT_CATEGORY_ID:378,JOB_AUTOMOTIVE_ENGINEERING_CATEGORY_ID:379,JOB_BANKING_FINANCE_CATEGORY_ID:380,JOB_BEAUTY_CATEGORY_ID:381,JOB_BUSINESS_DEVELOPMENT_CATEGORY_ID:382,JOB_BUSINESS_SUPPLIES_CATEGORY_ID:383,JOB_CONSTRUCTION_CATEGORY_ID:384,JOB_CONSULTING_CATEGORY_ID:385,JOB_MARKETING_ADVERTISING_CATEGORY_ID:407,JOB_CUSTOMER_SERVICE_CATEGORY_ID:386,JOB_EDUCATION_CATEGORY_ID:387,JOB_ENGINEERING_CATEGORY_ID:389,JOB_ENV_SERVICES_CATEGORY_ID:390,JOB_EVENT_MANAGEMENT_CATEGORY_ID:391,JOB_EXECUTIVE_CATEGORY_ID:392,JOB_FASHION_CATEGORY_ID:393,JOB_FOOD_BEVERAGE_CATEGORY_ID:394,JOB_GOV_ADMIN_CATEGORY_ID:395,JOB_GRAPHIC_DESIGN_CATEGORY_ID:396,JOB_HOSPITALITY_RESTAURANT_CATEGORY_ID:397,JOB_HR_RECRUITMENT_CATEGORY_ID:398,JOB_MEDIA_CATEGORY_ID:408,JOB_PUBLIC_RELATIONS_CATEGORY_ID:413});hashiApp.constant('searchTypeConstant',{BASIC_SEARCH:'BasicSearch',ADVANCE_SEARCH:'AdvanceSearch',ADVANCE_SEARCH_CAR:'AdvanceSearchCar',ADVANCE_SEARCH_CAR_PARTS:'AdvanceSearchCarParts',ADVANCE_SEARCH_BOATS:'AdvanceSearchBoats',ADVANCE_SEARCH_HEAVY_VEHICLE:'AdvanceSearchHeavyVehicle',ADVANCE_SEARCH_MOTORCYCLE:'AdvanceSearchMotorcycle',ADVANCE_SEARCH_SALE_RES:'AdvanceSearchSaleRes',ADVANCE_SEARCH_SALE_COMM:'AdvanceSearchSaleComm',ADVANCE_SEARCH_SALE_UNITS:'AdvanceSearchSaleUnits',ADVANCE_SEARCH_SALE_LAND:'AdvanceSearchSaleLand',ADVANCE_SEARCH_RENT_RES:'AdvanceSearchRentRes',ADVANCE_SEARCH_RENT_COMM:'AdvanceSearchRentComm',ADVANCE_SEARCH_RENT_ROOM:'AdvanceSearchRentRoom',ADVANCE_SEARCH_RENT_HOTEL:'AdvanceSearchRentHotel',ADVANCE_SEARCH_RENT_SHORT_MONTHLY:'AdvanceSearchRentShortMonthly',ADVANCE_SEARCH_CLASSIFIED:'AdvanceSearchClassified',ADVANCE_SEARCH_JOB:'AdvanceSearchJob',ADVANCE_SEARCH_COMMUNITY:'AdvanceSearchCommunity'});hashiApp.constant('coloursEnglish',[{"id":1,"name":"White"},{"id":2,"name":"Black"},{"id":3,"name":"Green"},{"id":4,"name":"Blue"},{"id":5,"name":"Yellow"},{"id":6,"name":"Red"},{"id":7,"name":"Pink"},{"id":8,"name":"Silver"},{"id":9,"name":"Other colour"}]);hashiApp.constant('coloursSomali',[{"id":1,"name":"Cadaan"},{"id":2,"name":"Madoow"},{"id":3,"name":"Cagaar"},{"id":4,"name":"Buluug"},{"id":5,"name":"Jaale"},{"id":6,"name":"Guduud"},{"id":7,"name":"Basali"},{"id":8,"name":"Qalin"},{"id":9,"name":"Midab kale"}]);hashiApp.constant('bodyTypeCarEnglish',[{"id":1,"name":"Hatchback"},{"id":2,"name":"Sedan"},{"id":3,"name":"MUV/SUV"},{"id":4,"name":"Coupe"},{"id":5,"name":"Convertible"},{"id":6,"name":"Wagon"},{"id":7,"name":"Van"},{"id":8,"name":"Jeep"},{"id":9,"name":"Other"}]);hashiApp.constant('bodyTypeCarSomali',[{"id":1,"name":"Hatchback"},{"id":2,"name":"Sedan"},{"id":3,"name":"MUV/SUV"},{"id":4,"name":"Coupe"},{"id":5,"name":"Convertible"},{"id":6,"name":"Wagon"},{"id":7,"name":"Van"},{"id":8,"name":"Jeep"},{"id":9,"name":"Other"}]);hashiApp.constant('fuelTypeCarEnglish',[{"id":1,"name":"Petrol"},{"id":2,"name":"Diesel"},{"id":3,"name":"Hybrid"},{"id":4,"name":"Electric"}]);hashiApp.constant('fuelTypeCarSomali',[{"id":1,"name":"Petrol"},{"id":2,"name":"Naafto"},{"id":3,"name":"Hybrid"},{"id":4,"name":"Koronto"}]);hashiApp.constant('transmissionCarEnglish',[{"id":1,"name":"Manual"},{"id":2,"name":"Automatic"}]);hashiApp.constant('transmissionCarSomali',[{"id":1,"name":"Manual"},{"id":2,"name":"Automatic"}]);hashiApp.constant('sellerTypeEnglish',[{"id":1,"name":"Owner"},{"id":2,"name":"Dealer"}]);hashiApp.constant('sellerTypeSomali',[{"id":1,"name":"Miilkiile"},{"id":2,"name":"Ganacsade"}]);hashiApp.constant('lengthEnglish',[{"id":1,"name":"Under 10 ft."},{"id":2,"name":"10-14 ft."},{"id":3,"name":"15-19 ft."},{"id":4,"name":"20-24 ft."},{"id":5,"name":"25-29 ft."},{"id":6,"name":"30-39 ft."},{"id":7,"name":"40-49 ft."},{"id":8,"name":"50-69 ft."},{"id":9,"name":"70-100 ft."},{"id":10,"name":"100+ ft."}]);hashiApp.constant('lengthSomali',[{"id":1,"name":"Under 10 tilaabo."},{"id":2,"name":"10-14 tilaabo."},{"id":3,"name":"15-19 ft."},{"id":4,"name":"20-24 ft."},{"id":5,"name":"25-29 ft."},{"id":6,"name":"30-39 ft."},{"id":7,"name":"40-49 ft."},{"id":8,"name":"50-69 ft."},{"id":9,"name":"70-100 ft."},{"id":10,"name":"100+ ft."}]);hashiApp.constant('warrantyEnglish',[{"id":1,"name":"Yes"},{"id":2,"name":"No"},{"id":3,"name":"Does not apply"}]);hashiApp.constant('warrantySomali',[{"id":1,"name":"Haa"},{"id":2,"name":"May"},{"id":3,"name":"Ma khuseeyo"}]);hashiApp.constant('noCylindersEnglish',[{"id":1,"name":3},{"id":2,"name":4},{"id":3,"name":5},{"id":4,"name":6},{"id":5,"name":7},{"id":6,"name":8},{"id":7,"name":9},{"id":8,"name":10},{"id":9,"name":12}]);hashiApp.constant('noCylindersSomali',[{"id":1,"name":3},{"id":2,"name":4},{"id":3,"name":5},{"id":4,"name":6},{"id":5,"name":7},{"id":6,"name":8},{"id":7,"name":9},{"id":8,"name":10},{"id":9,"name":"12+"}]);hashiApp.constant('horsePowerEnglish',[{"id":1,"name":"Less than 150 HP"},{"id":2,"name":"150 - 200 HP"},{"id":3,"name":"200 - 300 HP"},{"id":4,"name":"300 - 400 HP"},{"id":5,"name":"400+ HP"},{"id":6,"name":"Unknown"}]);hashiApp.constant('horsePowerSomali',[{"id":1,"name":"Less than 150 HP"},{"id":2,"name":"150 - 200 HP"},{"id":3,"name":"200 - 300 HP"},{"id":4,"name":"300 - 400 HP"},{"id":5,"name":"400+ HP"},{"id":6,"name":"Magaranayo"}]);hashiApp.constant('noBedroomsVillaEnglish',[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"4"},{"id":5,"name":"5"},{"id":6,"name":"6"},{"id":7,"name":"7"},{"id":8,"name":"8+"}]);hashiApp.constant('noBedroomsVillaSomali',[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"4"},{"id":5,"name":"5"},{"id":6,"name":"6"},{"id":7,"name":"7"},{"id":8,"name":"8+"}]);hashiApp.constant('noBedroomsApartmentEnglish',[{"id":1,"name":"Studio"},{"id":2,"name":"1"},{"id":3,"name":"2"},{"id":4,"name":"3"},{"id":5,"name":"4"},{"id":6,"name":"5"},{"id":7,"name":"6"},{"id":8,"name":"7"},{"id":9,"name":"8+"}]);hashiApp.constant('noBedroomsApartmentSomali',[{"id":1,"name":"Studio"},{"id":2,"name":"1"},{"id":3,"name":"2"},{"id":4,"name":"3"},{"id":5,"name":"4"},{"id":6,"name":"5"},{"id":7,"name":"6"},{"id":8,"name":"7"},{"id":9,"name":"8+"}]);hashiApp.constant('noBathroomsEnglish',[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"4"},{"id":5,"name":"5"},{"id":6,"name":"6"},{"id":7,"name":"7"},{"id":8,"name":"8"}]);hashiApp.constant('noBathroomsSomali',[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"4"},{"id":5,"name":"5"},{"id":6,"name":"6"},{"id":7,"name":"7"},{"id":8,"name":"8"}]);hashiApp.constant('ownerTypeEnglish',[{"id":1,"name":"Landloard"},{"id":2,"name":"Agent"},]);hashiApp.constant('ownerTypeSomali',[{"id":1,"name":"Milkiile"},{"id":2,"name":"Dalaal"},]);hashiApp.constant('zonedForEnglish',[{"id":1,"name":"Residential"},{"id":2,"name":"Commercial"},{"id":3,"name":"Retail"},{"id":4,"name":"Mixed Use"}]);hashiApp.constant('zonedForSomali',[{"id":1,"name":"Deegaan"},{"id":2,"name":"Ganacsi"},{"id":3,"name":"Dukaamo"},{"id":4,"name":"Isku jir"}]);hashiApp.constant('rentTimeEnglish',[{"id":1,"name":"Daily"},{"id":2,"name":"Weekly"},{"id":3,"name":"Monthly"},{"id":4,"name":"Yearly"},{"id":5,"name":"Negotiable"},]);hashiApp.constant('rentTimeSomali',[{"id":1,"name":"Maalin"},{"id":2,"name":"Usbuuc"},{"id":3,"name":"Bishi"},{"id":4,"name":"Sanadki"},{"id":5,"name":"Gorgortan"},]);hashiApp.constant('furnishedEnglish',[{"id":1,"name":"Furnished"},{"id":2,"name":"Unfurnished"}]);hashiApp.constant('furnishedSomali',[{"id":1,"name":"Wuu goglanyahay"},{"id":2,"name":"Ma goglana"}]);hashiApp.constant('conditionEnglish',[{"id":1,"name":"Excellent"},{"id":2,"name":"Good"},{"id":3,"name":"Average"},{"id":4,"name":"Poor"},]);hashiApp.constant('conditionSomali',[{"id":1,"name":"Heer sare"},{"id":2,"name":"Wanaagsan"},{"id":3,"name":"Dhexdhexaad"},{"id":4,"name":"Wow liitaa"}]);hashiApp.constant('ageEnglish',[{"id":1,"name":"New"},{"id":2,"name":"Used"}]);hashiApp.constant('ageSomali',[{"id":1,"name":"Cuseeb"},{"id":2,"name":"Waa la'isticmaalay"}]);hashiApp.constant('cameraBrand',[{"id":1,"name":"Aiptek"},{"id":2,"name":"Canon"},{"id":3,"name":"Casio"},{"id":4,"name":"Dual"},{"id":5,"name":"Fujifilm"},{"id":6,"name":"HP"},{"id":7,"name":"JVC"},{"id":8,"name":"Kodak"},{"id":9,"name":"Konika"},{"id":10,"name":"Konika Minolta"},{"id":11,"name":"Leica"},{"id":12,"name":"Minolta"},{"id":13,"name":"Nikon"},{"id":14,"name":"Olympus"},{"id":15,"name":"Panasonic"},{"id":16,"name":"Pentax"},{"id":17,"name":"Polaroid"},{"id":18,"name":"Pure Digital"},{"id":19,"name":"Samsung"},{"id":20,"name":"Sanyo"},{"id":21,"name":"Sharp"},{"id":22,"name":"Sigma"},{"id":23,"name":"Sony"},{"id":24,"name":"SVP"},{"id":25,"name":"Vivitar"},{"id":26,"name":"Other Brand"}]);hashiApp.constant('computerBrand',[{"id":1,"name":"Acer"},{"id":2,"name":"Adobe"},{"id":3,"name":"Alienware"},{"id":4,"name":"AMD"},{"id":5,"name":"Apple/Mac"},{"id":6,"name":"ASUS"},{"id":7,"name":"ATI"},{"id":8,"name":"Belkin"},{"id":9,"name":"BENQ"},{"id":10,"name":"Brother"},{"id":11,"name":"Canon"},{"id":12,"name":"Compaq"},{"id":13,"name":"D-Link"},{"id":14,"name":"Dell"},{"id":15,"name":"eMachines"},{"id":16,"name":"Fujitsu"},{"id":17,"name":"Gateway"},{"id":18,"name":"HP"},{"id":19,"name":"IBM/Lenovo"},{"id":20,"name":"Intel"},{"id":21,"name":"Lexmark"},{"id":22,"name":"Linksys"},{"id":23,"name":"Logitech"},{"id":24,"name":"Macromedia"},{"id":25,"name":"Microsoft"},{"id":26,"name":"NEC"},{"id":27,"name":"OKI"},{"id":28,"name":"Packard Bell"},{"id":29,"name":"Panasonic"},{"id":30,"name":"Samsung"},{"id":31,"name":"Sony"},{"id":32,"name":"Toshiba"},{"id":33,"name":"Western Digital"},{"id":34,"name":"Xerox"},{"id":35,"name":"Other"}]);hashiApp.constant('computerMemory',[{"id":1,"name":"512 MB or more"},{"id":2,"name":"1 GB or more"},{"id":3,"name":"2 GB or more"},{"id":4,"name":"4 GB or more"},{"id":5,"name":"8 GB or more"}]);hashiApp.constant('computerProcessor',[{"id":1,"name":"Less than 500 MHz"},{"id":2,"name":"500 MHz or more"},{"id":3,"name":"1 GHz or more"},{"id":4,"name":"2 GHz or more"}]);hashiApp.constant('computerHardDrive',[{"id":1,"name":"0 - 99 GB"},{"id":2,"name":"100 - 249 GB"},{"id":3,"name":"250 - 499 GB"},{"id":4,"name":"500 - 749 GB"},{"id":5,"name":"750 - 999 GB"},{"id":6,"name":"1 - 1.49 TB"},{"id":7,"name":"1.5 - 1.9 TB"},{"id":8,"name":"2+ TB"}]);hashiApp.constant('careerLevelEnglish',[{"id":1,"name":"Student/Intern"},{"id":2,"name":"Junior"},{"id":3,"name":"Mid-level"},{"id":4,"name":"Senior"},{"id":5,"name":"Manager"},{"id":6,"name":"Executive/Director"},{"id":7,"name":"Other"}]);hashiApp.constant('careerLevelSomali',[{"id":1,"name":"Arday/Intern"},{"id":2,"name":"Junior"},{"id":3,"name":"Maamul dhexe"},{"id":4,"name":"Maamul sare"},{"id":5,"name":"Maamule"},{"id":6,"name":"Agaasime"},{"id":7,"name":"Wax kale"}]);hashiApp.constant('employmentTypeEnglish',[{"id":1,"name":"Full Time"},{"id":2,"name":"Part Time"},{"id":3,"name":"Contract"},{"id":4,"name":"Temporary"},{"id":5,"name":"Other"}]);hashiApp.constant('employmentTypeSomali',[{"id":1,"name":"Waqti buuxa"},{"id":2,"name":"Waqti dhiman"},{"id":3,"name":"Heshiis"},{"id":4,"name":"Waqti go'an"},{"id":5,"name":"Wax kale"}]);hashiApp.constant('workExperienceEnglish',[{"id":1,"name":"0-1 Years"},{"id":2,"name":"1-2 Years"},{"id":3,"name":"2-5 Years"},{"id":4,"name":"5-10 Years"},{"id":5,"name":"10-15 Years"},{"id":6,"name":"15+ Years"}]);hashiApp.constant('workExperienceSomali',[{"id":1,"name":"0-1 Sano"},{"id":2,"name":"1-2 Sano"},{"id":3,"name":"2-5 Sano"},{"id":4,"name":"5-10 Sano"},{"id":5,"name":"10-15 Sano"},{"id":6,"name":"15+ Sano"}]);hashiApp.constant('educationLevelEnglish',[{"id":1,"name":"Secondary"},{"id":2,"name":"High-School"},{"id":3,"name":"Bachelors Degree"},{"id":4,"name":"Masters Degree"},{"id":5,"name":"PhD"},{"id":6,"name":"10-15 Years"},{"id":7,"name":"Not needed"}]);hashiApp.constant('educationLevelSomali',[{"id":1,"name":"Dugsi Dhexe"},{"id":2,"name":"Dugsi Sare"},{"id":3,"name":"Jaamacad degree"},{"id":4,"name":"Master Degree"},{"id":5,"name":"PhD"},{"id":6,"name":"10-15 Years"},{"id":7,"name":"Maloo baahno"}]);hashiApp.constant('monthSalaryEnglish',[{"id":1,"name":"Unspecified"},{"id":2,"name":"0      -  100"},{"id":3,"name":"100    -  200"},{"id":4,"name":"200    -  400"},{"id":5,"name":"400    -  600"},{"id":6,"name":"600    -  800"},{"id":7,"name":"800    -  1,000"},{"id":8,"name":"1,000  -  1,500"},{"id":9,"name":"1,500  -  1,500"},{"id":10,"name":"1,500 -  2,000"},{"id":11,"name":"2,000 -  3,000"},{"id":12,"name":"3,000 -  5,000"},{"id":13,"name":"5,000 -  7,000"},{"id":14,"name":"9,000 -  10,000"},{"id":15,"name":"10,000+"}]);hashiApp.constant('monthSalarySomali',[{"id":1,"name":"Unspecified"},{"id":2,"name":"0      -  100"},{"id":3,"name":"100    -  200"},{"id":4,"name":"200    -  400"},{"id":5,"name":"400    -  600"},{"id":6,"name":"600    -  800"},{"id":7,"name":"800    -  1,000"},{"id":8,"name":"1,000  -  1,500"},{"id":9,"name":"1,500  -  1,500"},{"id":10,"name":"1,500 -  2,000"},{"id":11,"name":"2,000 -  3,000"},{"id":12,"name":"3,000 -  5,000"},{"id":13,"name":"5,000 -  7,000"},{"id":14,"name":"9,000 -  10,000"},{"id":15,"name":"10,000+"}]);hashiApp.constant('companySizeEnglish',[{"id":1,"name":"1-10"},{"id":2,"name":"11-50"},{"id":3,"name":"51-200"},{"id":4,"name":"201-500"},{"id":5,"name":"501-1000"},{"id":6,"name":"1001-5000"},{"id":7,"name":"5001-10000"},{"id":8,"name":"10000+"}]);hashiApp.constant('companySizeSomali',[{"id":1,"name":"1-10"},{"id":2,"name":"11-50"},{"id":3,"name":"51-200"},{"id":4,"name":"201-500"},{"id":5,"name":"501-1000"},{"id":6,"name":"1001-5000"},{"id":7,"name":"5001-10000"},{"id":8,"name":"10000+"}]);hashiApp.constant('cvRequiredEnglish',[{"id":1,"name":"Yes"},{"id":2,"name":"No"}]);hashiApp.constant('cvRequiredSomali',[{"id":1,"name":"Haa"},{"id":2,"name":"May"}]);hashiApp.constant('listedByEnglish',[{"id":1,"name":"Employer"},{"id":2,"name":"Recruiter"}]);hashiApp.constant('listedBySomali',[{"id":1,"name":"Loo-shaqeeye"},{"id":2,"name":"Qore"}]);hashiApp.constant('hideCompanyNameSomali',[{"id":1,"name":"Haa"},{"id":2,"name":"May"}]);hashiApp.constant('hideCompanyNameEnglish',[{"id":1,"name":"Yes"},{"id":2,"name":"No"}]);hashiApp.constant('sellerTypeSearchEnglish',[{"id":0,"name":"All Type"},{"id":1,"name":"Owner"},{"id":2,"name":"Dealer"}]);hashiApp.constant('sellerTypeSearchSomali',[{"id":0,"name":"Kuli"},{"id":1,"name":"Milkiilaha"},{"id":2,"name":"Ganacsade"}]);hashiApp.constant('errorsConstant',{ERROR01:'Picture is too big',ERROR02:'***'});var hashiApp=angular.module('hashiApp')
hashiApp.service('fileUploaderFactory',function(GeoCoder){var files=[];var fileZero=null;var fileOne=null;var fileTwo=null;var fileThree=null;var fileFour=null;var fileFive=null;var fileSix=null;this.initializeFileUploader=function(){files=[];fileZero=null;fileOne=null;fileTwo=null;fileThree=null;fileFour=null;fileFive=null;fileSix=null;}
this.fileUploadedSuccessfully=function(file,index){switch(index){case 0:fileZero=file;break;case 1:fileOne=file;break;case 2:fileTwo=file;break;case 3:fileThree=file;break;case 4:fileFour=file;break;case 5:fileFive=file;break;case 6:fileSix=file;break;default:console.log('There should not be a default failover at this thing.');}
return;};this.removeFile=function(index){switch(index){case 0:fileZero=null;break;case 1:fileOne=null;break;case 2:fileTwo=null;break;case 3:fileThree=null;break;case 4:fileFour=null;break;case 5:fileFive=null;break;case 6:fileSix=null;break;default:console.log('There should not be a default failover at this thing.');}}
this.getFiles=function(){files=[];var counter=0;if(fileZero){var temp={file:fileZero,imageIndex:0};files.push(temp);}
if(fileOne){var temp={file:fileOne,imageIndex:1};counter+=1;files.push(temp);}
if(fileTwo){counter+=1;var temp={file:fileTwo,imageIndex:2};files.push(temp);}if(fileThree){counter+=1;var temp={file:fileThree,imageIndex:3};files.push(temp);}if(fileFour){counter+=1;var temp={file:fileFour,imageIndex:4};files.push(temp);}if(fileFive){counter+=1;var temp={file:fileFive,imageIndex:5};files.push(temp);}if(fileSix){counter+=1;var temp={file:fileSix,imageIndex:6};files.push(temp);}
return files;}});var hashiApp=angular.module('hashiApp')
hashiApp.factory('mapFactory',function(GeoCoder){var location={};location.init=function(){return location={latitude:2.035539972730635,longtitude:45.32551288604736,city:'Muqdisho',country:'Somalia',region:'Banaadir',routeName:'Jidka Makkah Almukarramah'};};location.addMarker=function(event){var loc=event.latLng;location.latitude=loc.lat();location.longtitude=loc.lng();GeoCoder.geocode({location:loc}).then(function(results){console.log('the Tower');for(var i=0;i<results[0].address_components.length;i++){if(results[0].address_components[i].types[0]=="route")
location.routeName=results[0].address_components[i].long_name;if(results[0].address_components[i].types[0]=="administrative_area_level_2")
location.city=results[0].address_components[i].long_name;if(results[0].address_components[i].types[0]=="administrative_area_level_1")
location.region=results[0].address_components[i].long_name;if(results[0].address_components[i].types[0]=="country")
location.country=results[0].address_components[i].long_name;}});return location;};return location;});hashiApp.directive('emailAvailable',function($timeout,$q,$http){return{restrict:'AE',require:'ngModel',link:function(scope,elm,attr,model){model.$asyncValidators.usernameExists=function(email){return $http.get('http://xaashi-somalia-rest.cfapps.io/user/email/'+email).then(function(res){+$timeout(function(){model.$setValidity('emailExists',!!res.data);},1000);});};}}});hashiApp.directive('compareTo',[function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(scope,element,attributes,ngModel){ngModel.$validators.compareTo=function(modelValue){return modelValue==scope.otherModelValue;};scope.$watch("otherModelValue",function(){ngModel.$validate();});}};}]);hashiApp.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){function read(){ngModel.$setViewValue(element.html());}
ngModel.$render=function(){element.html(ngModel.$viewValue||"");};element.bind("blur keyup change",function(){scope.$apply(read);});}};});hashiApp.directive('flowImageResize',function($q){return{'require':'flowInit','link':function(scope,element,attrs){var resize=false;scope.$flow.opts.preprocess=function(chunk){if(resize==true){chunk.fileObj.promise.then(function(){if(!chunk.fileObj.resized){chunk.fileObj.resized=true;chunk.fileObj.retry();}});if(chunk.fileObj.resized){chunk.preprocessFinished();}}else{chunk.preprocessFinished();}};scope.$flow.on('filesSubmitted',function(files){resize=false;angular.forEach(files,function(file){if(file.size>400000){resize=true;var nativeFile=file.file;file.file=null;var deferred=$q.defer();file.promise=deferred.promise;loadImage(nativeFile,function(canvas){canvas.toBlob(function(blob){file.file=blob;file.size=blob.size;deferred.resolve();scope.$digest();});},{canvas:true,crop:true,maxWidth:400,maxHeight:400});}});})}};});hashiApp.directive('myFlowImg',[function(){return{'scope':false,'require':'^flowInit','link':function(scope,element,attrs){var file=attrs.myFlowImg;scope.$watch(file+'.file',function(file){if(!file){return;}
var fileReader=new FileReader();fileReader.readAsDataURL(file);fileReader.onload=function(event){scope.$apply(function(){attrs.$set('src',event.target.result);});};});}};}]);var hashiApp=angular.module('hashiApp')
hashiApp.factory('categoryFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/categories';var dataFactory={};dataFactory.getSubCategoriesByCategoryId=function(categoryId){return $http.get(urlBase+'/'+categoryId+'/categories/'+$translate.use(),{cache:true});};dataFactory.hasChildCategories=function(categoryId){return $http.get(urlBase+'/'+categoryId+'/hasChildCategories'+'/'+$translate.use());};dataFactory.getRootCategories=function(){return $http.get(urlBase+'/root/categories/'+$translate.use(),{cache:true});};dataFactory.getCategoryByCategoryId=function(categoryId){return $http.get(urlBase+'/category/'+categoryId+'/'+$translate.use());};dataFactory.getRootCategoriesByCategoryId=function(categoryId){return $http.get(urlBase+'/root/'+categoryId+'/categories'+'/'+$translate.use());};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('productFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/products';var dataFactory={};dataFactory.updateImageStatusForProduct=function(productId,imageStatus){return $http.put(urlBase+'/admin/product/'+productId+'/imageStatus/'+imageStatus);};dataFactory.updatePriorityForProduct=function(productId,productPriority){return $http.put(urlBase+'/admin/product/'+productId+'/productPriority/'+productPriority);};dataFactory.findProductWithUserByProductId=function(productId){return $http.get(urlBase+'/product/details/'+productId);};dataFactory.findProductWithoutUserByProductId=function(productId){return $http.get(urlBase+'/product/edit/'+productId);};dataFactory.findProductsByUserId=function(userId){return $http.get(urlBase+'/user/'+userId);};dataFactory.getFeaturedProducts=function(){return $http.get(urlBase+'/featured',{cache:true});};dataFactory.deleteProduct=function(productId){return $http.delete(urlBase+'/'+productId);};dataFactory.countProductsByCategoryId=function(categoryId,cityId){return $http.get(urlBase+'/count/'+categoryId+'/'+cityId,{cache:true});};dataFactory.countProductsByDepth=function(categoryId,cityId){return $http.get(urlBase+'/count/byDepth/'+categoryId+'/'+cityId);};dataFactory.advanceSearch=function(cityId,categoryId,simpleSearchText,pageIndex,sortColumn,sortDirection,searchObject){return $http.post(urlBase+'/advanceSearch',searchObject,{params:{cityId:cityId,categoryId:categoryId,searchText:simpleSearchText,pageIndex:pageIndex,sortColumn:sortColumn,sortDirection:sortDirection}});};dataFactory.basicSearch=function(cityId,categoryId,simpleSearchText,pageIndex,sortColumn,sortDirection){return $http.get(urlBase,{params:{cityId:cityId,categoryId:categoryId,searchText:simpleSearchText,pageIndex:pageIndex,sortColumn:sortColumn,sortDirection:sortDirection}});};dataFactory.saveProduct=function(files,product,location,categoryId,userId,telephone,logoImage){if(files.length>0){product.coverPhoto=0+'.'+files[0].file.name.split('.').pop();}
if(logoImage){if(logoImage.file){product.logoPhoto='logo.'+logoImage.file.name.split('.').pop();}else{product.logoPhoto=null;}}else{product.logoPhoto=null;}
return $http({method:'POST',url:urlBase+'/'+categoryId+'/'+userId,params:{telephone:telephone},headers:{'Content-Type':undefined},data:{product:product,files:files,location:location,logoImage:logoImage},transformRequest:function(data,headersGetter){var imageNames=[];var formData=new FormData();formData.append("product",angular.toJson(data.product));formData.append("location",angular.toJson(data.location));if(data.logoImage){if(data.logoImage.file.name){formData.append("logoImage",data.logoImage.file,'logo.'+data.logoImage.file.name.split('.').pop());}}
for(var i=0;i<data.files.length;i++){if(data.files[i].file.name){formData.append("file",data.files[i].file.file,i+'.'+files[i].file.name.split('.').pop());imageNames.push({imageName:i+'.'+files[i].file.name.split('.').pop(),imageIndex:data.files[i].imageIndex});}}
formData.append("imageNames",angular.toJson(imageNames));return formData;}});};dataFactory.updateProduct=function(files,product,userId,telephone,logoImage){if(files.length>0){product.coverPhoto=0+'.'+files[0].file.name.split('.').pop();}
if(logoImage){if(logoImage.file){product.logoPhoto='logo.'+logoImage.file.name.split('.').pop();}else{product.logoPhoto=null;}}else{product.logoPhoto=null;}
return $http({method:'POST',url:urlBase+'/update',params:{telephone:telephone,userId:userId},headers:{'Content-Type':undefined},data:{product:product,files:files,logoImage:logoImage},transformRequest:function(data,headersGetter){var imageNames=[];var formData=new FormData();var count=0;if(data.logoImage){if(data.logoImage.file.name){formData.append("logoImage",data.logoImage.file,'logo.'+data.logoImage.file.name.split('.').pop());}}
for(var i=0;i<data.files.length;i++){if(data.files[i].file.name){formData.append("file",data.files[i].file.file,i+'.'+files[i].file.name.split('.').pop());if(data.product.images[count]){imageNames.push({imageId:data.product.images[count].imageId,imageName:i+'.'+files[i].file.name.split('.').pop(),imageIndex:data.files[i].imageIndex});count++;}
else{imageNames.push({imageName:i+'.'+files[i].file.name.split('.').pop(),imageIndex:data.files[i].imageIndex});}}}
data.product.images=imageNames;formData.append("product",angular.toJson(data.product));return formData;}});};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('cityFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/cities';var dataFactory={};dataFactory.getCities=function(){return $http.get(urlBase+'/'+$translate.use(),{cache:true});};dataFactory.getCityName=function(cityId){return $http.get(urlBase+'/'+cityId+'/'+$translate.use());};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('tokenFactory',function($http){var urlBase='http://xaashi-somalia-rest.cfapps.io/verify';var dataFactory={};dataFactory.registerToken=function(token){return $http.put(urlBase+'/registerToken/'+token);};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('userFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/user';var dataFactory={};dataFactory.findUserByUserId=function(userId){return $http.get(urlBase+'/'+userId);};dataFactory.findUserByEmail=function(email){return $http.get(urlBase+'/email/{email}'+email);};dataFactory.saveUser=function(user){return $http.post(urlBase,user);};dataFactory.updateUserByColumnNameAndUserId=function(userId,columnName,data){return $http.put(urlBase+'/'+columnName+'/'+userId+'/'+data);};dataFactory.isPasswordSame=function(userId,password){return $http.get(urlBase+'/isPasswordSame/'+userId+'/'+password);};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('profileFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/profile';var dataFactory={};dataFactory.findProfileByUserId=function(userId){console.log(userId);return $http.get(urlBase+'/user/'+userId);};dataFactory.createNewProfile=function(profile,userId,profileCV,profileImage){return $http({method:'POST',url:urlBase,params:{userId:userId},headers:{'Content-Type':undefined},data:{profile:profile,profileCV:profileCV,profileImage:profileImage},transformRequest:function(data,headersGetter){var formData=new FormData();formData.append("profile",angular.toJson(data.profile));if(profileCV)
formData.append("profileCV",data.profileCV.file,data.profileCV.file.name);if(profileImage)
formData.append("profileImage",data.profileImage.file,data.profileImage.file.name);return formData;}});};dataFactory.updateProfile=function(profile,userId,profileCV,profileImage){return $http({method:'POST',url:urlBase+'/update',params:{userId:userId},headers:{'Content-Type':undefined},data:{profile:profile,profileCV:profileCV,profileImage:profileImage},transformRequest:function(data,headersGetter){var formData=new FormData();formData.append("profile",angular.toJson(data.profile));if(profileCV)
formData.append("profileCV",data.profileCV.file,data.profileCV.file.name);if(profileImage)
if(profileImage.file)
formData.append("profileImage",data.profileImage.file,data.profileImage.file.name);return formData;}});};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('emailFactory',function($http){var urlBase='http://xaashi-somalia-rest.cfapps.io/email';var dataFactory={};dataFactory.sendReplyAdByEmail=function(emailVO,userId){return $http.post(urlBase+'/reply/ad/user/'+userId,emailVO);};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('passwordFactory',function($http){var urlBase='http://xaashi-somalia-rest.cfapps.io/password';var dataFactory={};dataFactory.sendLostPasswordToken=function(email){return $http.put(urlBase+'/lostPassword/email/'+email);};dataFactory.resetPassword=function(token,passwordRequest){return $http.put(urlBase+'/resetPassword/token/'+token,passwordRequest);};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('applicantFactory',function($http,$q,$translate){var urlBase='http://xaashi-somalia-rest.cfapps.io/applicants';var dataFactory={};dataFactory.findApplicants=function(productId,pageIndex,sortColumn,sortDirection){console.log(productId);return $http.get(urlBase+'/job/'+productId,{params:{pageIndex:pageIndex,sortColumn:sortColumn,sortDirection:sortDirection}});};dataFactory.hasUserPostedJobs=function(userId){console.log(userId);return $http.get(urlBase+'/language/'+$translate.use()+'/user/'+userId);};dataFactory.applyJob=function(emailReplyJobVO,employerUserId,profileId,fileCV,jobSeekerUserId){return $http({method:'POST',url:urlBase+'/reply/job',params:{employerUserId:employerUserId,profileId:profileId,jobSeekerUserId:jobSeekerUserId},headers:{'Content-Type':undefined},data:{emailReplyJobVO:emailReplyJobVO,fileCV:fileCV},transformRequest:function(data,headersGetter){var formData=new FormData();formData.append("emailReplyJobVO",angular.toJson(data.emailReplyJobVO));if(fileCV)
formData.append("fileCV",data.fileCV.file,data.fileCV.file.name);return formData;}});};return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('dispatcherDetailsFactory',function($location,$state,categoryRange,productFactory,categoryName){var dataFactory={};dataFactory.forwardToDetailsPage=function(productId,categoryId,categoryLft,categoryRgt){if(categoryId>0){if(categoryLft>=categoryRange.MOTOR_MIN&&categoryRgt<=categoryRange.MOTOR_MAX)
{if(categoryLft>=categoryRange.MOTOR_CAR_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_CAR});return;}
else if(categoryLft>=categoryRange.MOTOR_CAR_PARTS_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_PARTS_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_CAR_PARTS});return;}
else if(categoryLft>=categoryRange.MOTOR_BOATS_MIN&&categoryRgt<=categoryRange.MOTOR_BOATS_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_BOATS});return;}
else if(categoryLft>=categoryRange.MOTOR_HEAVY_VEHICLE_MIN&&categoryRgt<=categoryRange.MOTOR_HEAVY_VEHICLE_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_HEAVY_VEHICLE});return;}
else if(categoryLft>=categoryRange.MOTOR_MOTORCYCLES_MIN&&categoryRgt<=categoryRange.MOTOR_MOTORCYCLES_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_MOTORCYCLES});return;}else{console.log('dispatcher_details_next not finding the root');}}else if(categoryLft>=categoryRange.PROPERTY_SALE_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_MAX){if(categoryLft>=categoryRange.PROPERTY_SALE_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_RES_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_RES});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_COMM_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_COMM});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_UNITS_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_UNITS_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_UNITS});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_LAND_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_LAND_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_LAND});return;}
else{console.log('dispatcher_details_next not finding the root');}}else if(categoryLft>=categoryRange.PROPERTY_RENT_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_MAX){if(categoryLft>=categoryRange.PROPERTY_RENT_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_RES_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_RES});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_COMM_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_COMM});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_ROOM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_ROOM_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_ROOM});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_HOTEL_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_HOTEL_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_HOTEL});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_SHORT_MONTHLY});return;}
else{console.log('dispatcher_details_next not finding the root RENT properties if. ');}}else if(categoryLft>=categoryRange.CLASSIFIED_MIN&&categoryRgt<=categoryRange.CLASSIFIED_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.CLASSIFIED});return;}else if(categoryLft>=categoryRange.COMMUNITY_MIN&&categoryRgt<=categoryRange.COMMUNITY_MAX){$state.go("details",{productId:productId,categoryId:categoryId,categoryType:categoryName.COMMUNITY});return;}
else if(categoryLft>=categoryRange.JOB_MIN&&categoryRgt<=categoryRange.JOB_MAX){$state.go("details_job",{productId:productId,categoryId:categoryId,categoryType:categoryName.JOB});return;}
else{console.log('dispatcher_details_next not finding the root');}}}
return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.factory('dispatcherPostAdNextFactory',function($location,$state,$stateParams,categoryRange,productFactory,categoryName){var dataFactory={};dataFactory.forwardToPostAdNext=function(productId,categoryId,categoryLft,categoryRgt){if(categoryId>0){if(categoryLft>=categoryRange.MOTOR_MIN&&categoryRgt<=categoryRange.MOTOR_MAX)
{if(categoryLft>=categoryRange.MOTOR_CAR_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_MAX){$state.go("post_ad_car",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.MOTOR_CAR_PARTS_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_PARTS_MAX){$state.go("post_ad_car_parts",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.MOTOR_BOATS_MIN&&categoryRgt<=categoryRange.MOTOR_BOATS_MAX){$state.go("post_ad_boats",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.MOTOR_HEAVY_VEHICLE_MIN&&categoryRgt<=categoryRange.MOTOR_HEAVY_VEHICLE_MAX){$state.go("post_ad_heavy_vehicle",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.MOTOR_MOTORCYCLES_MIN&&categoryRgt<=categoryRange.MOTOR_MOTORCYCLES_MAX){$state.go("post_ad_motorcycle",{categoryId:categoryId,productId:productId});return;}}else if(categoryLft>=categoryRange.PROPERTY_SALE_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_MAX)
{if(categoryLft>=categoryRange.PROPERTY_SALE_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_RES_MAX){$state.go("post_ad_sale_res",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_COMM_MAX){$state.go("post_ad_sale_comm",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_UNITS_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_UNITS_MAX){$state.go("post_ad_sale_units",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_LAND_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_LAND_MAX){$state.go("post_ad_sale_land",{categoryId:categoryId,productId:productId});return;}}else if(categoryLft>=categoryRange.PROPERTY_RENT_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_MAX)
{if(categoryLft>=categoryRange.PROPERTY_RENT_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_RES_MAX){$state.go("post_ad_rent_res",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_COMM_MAX){$state.go("post_ad_rent_comm",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_ROOM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_ROOM_MAX){$state.go("post_ad_rent_room",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MAX){$state.go("post_ad_rent_short_term",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_HOTEL_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_HOTEL_MAX){$state.go("post_ad_rent_hotels",{categoryId:categoryId,productId:productId});return;}}else if(categoryLft>=categoryRange.CLASSIFIED_MIN&&categoryRgt<=categoryRange.CLASSIFIED_MAX)
{if(categoryLft>=categoryRange.CLASSIFIED_CAMERA_MIN&&categoryRgt<=categoryRange.CLASSIFIED_CAMERA_MAX){$state.go("post_ad_classified_camera",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.CLASSIFIED_COMPUTER_MIN&&categoryRgt<=categoryRange.CLASSIFIED_COMPUTER_MAX){$state.go("post_ad_classified_computer",{categoryId:categoryId,productId:productId});return;}
else if(categoryLft>=categoryRange.CLASSIFIED_PETS_MIN&&categoryRgt<=categoryRange.CLASSIFIED_PETS_MAX){$state.go("post_ad_classified_pets",{categoryId:categoryId,productId:productId});return;}
else{$state.go("post_ad_classified",{categoryId:categoryId,productId:productId});return;}}else if(categoryLft>=categoryRange.COMMUNITY_MIN&&categoryRgt<=categoryRange.COMMUNITY_MAX)
{$state.go("post_ad_community",{categoryId:categoryId,productId:productId});return;}else if(categoryLft>=categoryRange.JOB_MIN&&categoryRgt<=categoryRange.JOB_MAX)
{$state.go("post_ad_job",{categoryId:categoryId,productId:productId});return;}
else{console.log("please check this case dispatcher_post_ad_next method()");}}}
return dataFactory;});var hashiApp=angular.module('hashiApp')
hashiApp.controller('DetailsController',function($scope,$location,$state,$stateParams,$anchorScroll,$translate,bucketName,categoryRange,productFactory,categoryFactory,cityFactory,profileFactory,flowFactory,auth,categoryName,ageSomali,ageEnglish,lengthEnglish,lengthSomali,horsePowerEnglish,horsePowerSomali,noCylindersEnglish,noCylindersSomali,bodyTypeCarSomali,bodyTypeCarEnglish,sellerTypeEnglish,sellerTypeSomali,coloursEnglish,coloursSomali,fuelTypeCarEnglish,fuelTypeCarSomali,transmissionCarEnglish,transmissionCarSomali,$sce,noBedroomsApartmentEnglish,noBedroomsApartmentSomali,ownerTypeEnglish,ownerTypeSomali,conditionSomali,conditionEnglish,noBathroomsEnglish,noBathroomsSomali,furnishedEnglish,furnishedSomali,rentTimeEnglish,rentTimeSomali,cameraBrand,warrantyEnglish,warrantySomali,computerBrand,computerHardDrive,computerProcessor,computerMemory,dvdRating,careerLevelEnglish,careerLevelSomali,employmentTypeEnglish,employmentTypeSomali,$http,$timeout,workExperienceEnglish,workExperienceSomali,educationLevelEnglish,educationLevelSomali,$window,monthSalaryEnglish,monthSalarySomali,cvRequiredSomali,cvRequiredEnglish,emailFactory,applicantFactory,listedBySomali,listedByEnglish,companySizeEnglish,companySizeSomali,searchTypeConstant,hideCompanyNameSomali,hideCompanyNameEnglish,categoryIdConstant,sellerTypeSearchSomali,sellerTypeSearchEnglish,promiseCities,promiseCategories,promiseListRootCategories,promiseProduct){$scope.fileCV;$scope.linkCVDownload;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.replyMessage;$scope.showReplyMessage=false;$scope.advSelectedCityId=0;$scope.advTextSearch=null;$scope.categoryRange=categoryRange;$scope.advCategoryLevelOneObject=[];$scope.advCategoryLevelTwoObject=[];$scope.advCategoryLevelThreeObject=[];$scope.advCategoryLevelFourObject=[];$scope.advFinalSelectedCategoryId=0;$scope.advSelectedCategoryIdLevelOne=2;$scope.advSelectedCategoryIdLevelTwo=0;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.showSubCategoryLevelOne=false;$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.yearForm;$scope.priceFrom;$scope.priceTo;$scope.yearMin;$scope.yearMax;$scope.KMFrom;$scope.KMTo;$scope.bedroomMin;$scope.bedroomMax;$scope.selectedSellerType=0;$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRommDiv=false;$scope.showAdvanceSearchRentShortDailyDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;$scope.bucketName=bucketName;$scope.images=[];$scope.profileId=0;$scope.replyJob={};(function init(){$scope.product=promiseProduct.data;isProductHasImages($scope.product);$scope.listCities=promiseCities.data;$scope.categories=promiseCategories.data;$scope.advCategoryLevelOneObject=$scope.categories[0];$scope.listRootCategories=promiseListRootCategories.data;if(auth){if(auth.authenticated){$scope.reply={name:auth.authenticatedFirstname,email:auth.authenticatedEmail,telephone:auth.authenticatedTelephone};}}
$scope.cameraBrandConstant=cameraBrand;$scope.computerBrandConstant=computerBrand;$scope.computerHardDriveConstant=computerHardDrive;$scope.computerProcessorConstant=computerProcessor;$scope.computerMemoryConstant=computerMemory;$scope.brandConstant=cameraBrand;$scope.dvdRatingConstant=dvdRating;if($translate.use()==='so_SO'){$scope.warrantyConstant=warrantySomali;$scope.ageConstant=ageSomali;$scope.conditionConstant=conditionSomali;$scope.constantCareerLevel=careerLevelSomali;$scope.constantEmploymentType=employmentTypeSomali;$scope.constantWorkExperience=workExperienceSomali;$scope.constantEducationLevel=educationLevelSomali;$scope.constantMonthSalary=monthSalarySomali;$scope.constantCVRequired=cvRequiredSomali;$scope.constantListedBy=listedBySomali;$scope.constantCompanySize=companySizeSomali;$scope.constantHideCompanyName=hideCompanyNameSomali;$scope.listSellerTypes=sellerTypeSearchSomali;$scope.sellerTypeConstant=sellerTypeSomali;$scope.fuelTypeCarConstant=fuelTypeCarSomali;$scope.horsePowerConstant=horsePowerSomali;$scope.noCylindersConstant=noCylindersSomali;$scope.transmissionCarConstant=transmissionCarSomali;$scope.coloursCarConstant=coloursSomali;$scope.bodyTypeCarConstant=bodyTypeCarSomali;$scope.ageItemConstant=ageEnglish;$scope.lengthBoatsConstant=lengthSomali;$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantFurnished=furnishedSomali;$scope.constantRentTime=rentTimeSomali;}
else if($translate.use()==='en_US'){$scope.listSellerTypes=sellerTypeSearchEnglish;$scope.warrantyConstant=warrantyEnglish;$scope.ageConstant=ageEnglish;$scope.conditionConstant=conditionEnglish;$scope.constantCareerLevel=careerLevelEnglish;$scope.constantEmploymentType=employmentTypeEnglish;$scope.constantWorkExperience=workExperienceEnglish;$scope.constantEducationLevel=educationLevelEnglish;$scope.constantMonthSalary=monthSalaryEnglish;$scope.constantCVRequired=cvRequiredEnglish;$scope.constantListedBy=listedByEnglish;$scope.constantCompanySize=companySizeEnglish;$scope.constantHideCompanyName=hideCompanyNameEnglish;$scope.sellerTypeConstant=sellerTypeEnglish;$scope.fuelTypeCarConstant=fuelTypeCarEnglish;$scope.horsePowerConstant=horsePowerEnglish;$scope.noCylindersConstant=noCylindersEnglish;$scope.transmissionCarConstant=transmissionCarEnglish;$scope.coloursCarConstant=coloursEnglish;$scope.bodyTypeCarConstant=bodyTypeCarEnglish;$scope.ageItemConstant=ageEnglish;$scope.lengthBoatsConstant=lengthEnglish;$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantFurnished=furnishedEnglish;$scope.constantRentTime=rentTimeEnglish;}
if($stateParams.categoryType==categoryName.JOB){if(auth){if(auth.authenticated){findProfileByUserId(auth.authenticatedUserId);}}}})();function hideAdvanceSearchDiv(categoryId){$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentShortDailyDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;}
$scope.getSubCategoriesLevelTwo=function(category){hideAdvanceSearchDiv(category.categoryId);$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelTwo=0;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelTwo=[];$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelOne=category.categoryId;categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelTwo=categ;$scope.advCategoryLevelTwoObject=$scope.listSubCategoriesLevelTwo[0];$scope.advSelectedCategoryIdLevelTwo=$scope.listSubCategoriesLevelTwo[0].categoryId;$scope.showSubCategoryLevelTwo=true;}});}
$scope.getSubCategoriesLevelThree=function(category){$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelThree=0;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];if(category){hideAdvanceSearchDiv(category.categoryId);showAdvanceSearchDiv(category.categoryId);if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelTwo=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelOne;$scope.advSelectedCategoryIdLevelTwo=$scope.advSelectedCategoryIdLevelOne;}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelThree=categ;$scope.advCategoryLevelThreeObject=$scope.listSubCategoriesLevelThree[0];$scope.advSelectedCategoryIdLevelThree=$scope.listSubCategoriesLevelThree[0].categoryId;$scope.showSubCategoryLevelThree=true;}});}}
$scope.getSubCategoriesLevelFour=function(category){$scope.showSubCategoryLevelFour=false;$scope.advSelectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelFour=[];if(category){if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelThree=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelTwo;$scope.advSelectedCategoryIdLevelThree=$scope.advSelectedCategoryIdLevelTwo;}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelFour=categ;$scope.advCategoryLevelFourObject=$scope.listSubCategoriesLevelFour[0];$scope.advSelectedCategoryIdLevelFour=$scope.listSubCategoriesLevelFour[0].categoryId;$scope.showSubCategoryLevelFour=true;}});}}
$scope.getSubCategoriesLevelFive=function(category){if(category){if(!category.categoryName.match(">")){$scope.advFinalSelectedCategoryId=category.categoryId;$scope.advSelectedCategoryIdLevelFour=category.categoryId;}else{$scope.advFinalSelectedCategoryId=$scope.advSelectedCategoryIdLevelThree;$scope.advSelectedCategoryIdLevelFour=$scope.advSelectedCategoryIdLevelThree;}}}
$scope.sendReplyAdByEmail=function(replyAdForm){$scope.postAdCarError=false;$scope.postAdCarErrorMessage='';if(replyAdForm){if($scope.showReplyMessage==false){$scope.replyAd.type='EmailReplyAdVO';$scope.replyAd.mailType='REPLY_AD';$scope.replyAd.productId=$scope.product.productId;$scope.replyAd.productTitle=$scope.product.productTitle;$scope.myPromise=emailFactory.sendReplyAdByEmail($scope.replyAd,$scope.product.user.userId).success(function(result){$scope.replyMessage="Success!. Your email has been sent";$scope.showReplyMessage=true;$scope.styleMessage="alert alert-success";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});return;}else{$scope.replyMessage="Sorry your email has been sent already.!";$scope.styleMessage="alert alert-danger";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}}
return;}
$scope.sendReplyJobByEmail=function(){if(auth){if(auth.authenticated){if($scope.showReplyMessage==false){$scope.replyJob.type='EmailReplyJobVO';$scope.replyJob.mailType='REPLY_JOB';$scope.replyJob.productId=$scope.product.productId;$scope.replyJob.productTitle=$scope.product.productTitle;$scope.myPromise=applicantFactory.applyJob($scope.replyJob,$scope.product.user.userId,$scope.profileId,$scope.fileCV,auth.authenticatedUserId).success(function(result){$scope.replyMessage="Success !.  You have applied Successfully!";$scope.showReplyMessage=true;$scope.styleMessage="alert alert-success";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}).error(function(error){$scope.showReplyMessage=true;$scope.replyMessage=error.message;$scope.styleMessage="alert alert-danger";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});return;}else{$scope.replyMessage="Sorry. Your have already applied.";$scope.styleMessage="alert alert-danger";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}}else{$scope.showReplyMessage=true;$scope.replyMessage="Sorry. To apply a job first you need to login.";$scope.styleMessage="alert alert-danger";$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}}
return;}
$scope.advanceSearch=function(){$state.go('listing',{searchType:typeOfAdvanceSearch(),advSelectedCityId:$scope.advSelectedCityId,advFinalSelectedCategoryId:$scope.advFinalSelectedCategoryId,advSelectedCategoryIdLevelOne:$scope.advSelectedCategoryIdLevelOne,advSelectedCategoryIdLevelTwo:$scope.advSelectedCategoryIdLevelTwo,advSelectedCategoryIdLevelThree:$scope.advSelectedCategoryIdLevelThree,advSelectedCategoryIdLevelFour:$scope.advSelectedCategoryIdLevelFour,advSearchText:$scope.advTextSearch,advPriceFrom:$scope.priceFrom,advPriceTo:$scope.priceTo,advYearMin:$scope.yearMin,advYearMax:$scope.yearMax,advKMFrom:$scope.KMFrom,advKMTo:$scope.KMTo,advSellerType:$scope.selectedSellerType,advBedroomMin:$scope.bedroomMin,advBedroomMax:$scope.bedroomMax});}
$scope.toTrustedHTML=function(html){return $sce.trustAsHtml(html);}
$scope.scrollTo=function(id){$location.hash(id);$anchorScroll();}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data});}
function findProductWithUserByProductId(productId){productFactory.findProductWithUserByProductId($stateParams.productId).success(function(data){$scope.product=data;if($scope.product.images){loadImagesFromAmazon($scope.product);}else{}});}
function isProductHasImages(product){if($scope.product.images){loadImagesFromAmazon($scope.product);}}
function initializeCategoriesLevelOne(){categoryFactory.getRootCategories().success(function(data){$scope.categories=data;$scope.advCategoryLevelOneObject=$scope.categories[0];});}
function initializeCities(){cityFactory.getCities().success(function(data){$scope.listCities=data;});}
function getCategoryByCategoryId(categories,categoryIdParam){for(var i=0;i<categories.length;i++){if(categories[i].categoryId==categoryIdParam){return categories[i];}}}
function initializeYears(){var currentYear=new Date().getFullYear();var range=[];$scope.years=[];for(var i=1900;i<currentYear+2;i++){range.push(i);}
$scope.years=range;$scope.yearMax=currentYear+1;return;}
function showAdvanceSearchDiv(categoryId){if(categoryId==categoryIdConstant.CAR_CATEGORY_ID){initializeYears();$scope.showAdvanceSearchCarDiv=true;}
else if(categoryId==categoryIdConstant.CAR_PARTS_CATEGORY_ID){$scope.showAdvanceSearchCarPartsDiv=true;return;}else if(categoryId==categoryIdConstant.BOATS_CATEGORY_ID){$scope.showAdvanceSearchBoatsDiv=true;return;}else if(categoryId==categoryIdConstant.HEAVY_VEHICLE_CATEGORY_ID){$scope.showAdvanceSearchHeavyVehicleDiv=true;return;}else if(categoryId==categoryIdConstant.MOTORCYCLES_CATEGORY_ID){$scope.showAdvanceSearchMotorcycleDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_RES_CATEGORY_ID){$scope.showAdvanceSearchSaleResDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_COMM_CATEGORY_ID){$scope.showAdvanceSearchSaleCommDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_UNITS_CATEGORY_ID){$scope.showAdvanceSearchSaleUnitsDiv=true;return;}
else if(categoryId==categoryIdConstant.SALE_LAND_CATEGORY_ID){$scope.showAdvanceSearchSaleLandDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_RES_CATEGORY_ID){$scope.showAdvanceSearchRentResDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_COMM_CATEGORY_ID){$scope.showAdvanceSearchRentCommDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_ROOM_CATEGORY_ID){$scope.showAdvanceSearchRentRoomDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_DAILY_CATEGORY_ID){$scope.showAdvanceSearchRentShortDailyDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID){$scope.showAdvanceSearchRentShortMonthlyDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_DVD_MOVIES_CATEGORY_ID){$scope.showAdvanceSearchClassifiedDiv=true;return;}
else{$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentShortDailyDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;return;}}
function typeOfAdvanceSearch(){if($scope.showAdvanceSearchCarDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CAR;}else if($scope.showAdvanceSearchCarPartsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS;}else if($scope.showAdvanceSearchBoatsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_BOATS;}else if($scope.showAdvanceSearchHeavyVehicleDiv==true){return searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE;}else if($scope.showAdvanceSearchMotorcycleDiv==true){return searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE;}else if($scope.showAdvanceSearchSaleResDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_RES;}else if($scope.showAdvanceSearchSaleCommDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_COMM;}else if($scope.showAdvanceSearchSaleUnitsDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS;}else if($scope.showAdvanceSearchSaleLandDiv==true){return searchTypeConstant.ADVANCE_SEARCH_SALE_LAND;}else if($scope.showAdvanceSearchRentResDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_RES;}else if($scope.showAdvanceSearchRentCommDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_COMM;}else if($scope.showAdvanceSearchRentRoomDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM;}else if($scope.showAdvanceSearchRentShortDailyDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_DAILY;}else if($scope.showAdvanceSearchRentShortMonthlyDiv==true){return searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY;}else if($scope.showAdvanceSearchClassifiedDiv==true){return searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED;}
return searchTypeConstant.ADVANCE_SEARCH;}
function findProfileByUserId(userId){profileFactory.findProfileByUserId(userId).success(function(data){if(data){$scope.profile=data;$scope.profileExist=true;if(data.profileId)
$scope.profileId=$scope.profile.profileId;if(data.coverLetter)
$scope.replyJob.coverLetter=data.coverLetter;if(data.cvName)
getImageFromAmazon(userId,bucketName.profileCV,data.cvName);}});}
function getImageFromAmazon(userId,bucket,fileName){$scope.myPromise=$http.get(bucket+userId+'/'+fileName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"*"});blob.name=fileName;$scope.existingImageObjectZero.addFile(blob);$scope.linkCVDownload=bucket+userId+'/'+fileName;},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
$scope.fileCVUploadedSuccessfully=function(file,index){$scope.fileCV=file;}
$scope.removeProfileCVFile=function(){$scope.fileCV=null;}
function loadImagesFromAmazon(product){for(var i=0;i<product.images.length;i++){$scope.images[i]=bucketName.productImages+product.productId+'/'+product.images[i].imageName;}
$scope.mainImageUrl=$scope.images[0];}
$scope.setImage=function(imageUrl){$scope.mainImageUrl=imageUrl;};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('ApplicantController',function($scope,$translate,applicantFactory,auth,promiseObj){$scope.oneAtATime=true;$scope.selectedProductId;$scope.currentPage=1;$scope.sortType='created';$scope.sortDirection='asc';$scope.sortReverse=false;(function init(){if(promiseObj){if(promiseObj.data){$scope.products=promiseObj.data;}}})();$scope.getNextPage=function(){findApplicants($scope.selectedProductId);}
$scope.getApplicantsDetail=function(productId,isOpen){$scope.selectedProductId=productId;if(!isOpen){findApplicants(productId);}};$scope.setSorting=function(sortType,sortDirection){console.log(sortType);if(sortDirection=='asc'){$scope.sortReverse=true;$scope.sortDirection='desc';$scope.sortType=sortType;}else{$scope.sortReverse=false;$scope.sortDirection='asc';$scope.sortType=sortType;}
findApplicants($scope.selectedProductId);}
function findApplicants(productId){console.log($scope.sortType);console.log($scope.sortDirection);console.log($scope.currentPage);$scope.myPromise=applicantFactory.findApplicants(productId,$scope.currentPage-1,$scope.sortType,$scope.sortDirection).success(function(data){$scope.applicants=data;});}
function hasUserPostedJobs(userId){applicantFactory.hasUserPostedJobs(userId).success(function(data){$scope.products=data;});}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdController',function($scope,$location,auth,$q,categoryFactory,categoryRange,$http,$state,dispatcherPostAdNextFactory,promiseRootCategories){$scope.postAdMessage="";$scope.postAdError=false;$scope.listSubCategoriesLevelOne=[];$scope.showSubCategoryLevelOne=false;$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.checkSubCategoriesLevelOne=[];$scope.checkSubCategoriesLevelTwo=[];$scope.checkSubCategoriesLevelThree=[];$scope.disableButton=true;$scope.selectedCategory=0;$scope.selectedCategoryLft=0;$scope.selectedCategoryRgt=0;$scope.selectedCategoryIdLevelOne=0;$scope.selectedCategoryIdLevelTwo=0;$scope.selectedCategoryIdLevelThree=0;$scope.selectedCategoryIdLevelFour=0;(function init(){$scope.categories=promiseRootCategories.data;$scope.categories.splice(0,1);})();$scope.authenticatedUserId=function(){return auth.authenticatedUserId;}
$scope.getSubCategoriesLevelOne=function(categoryId,categoryLft,categoryRgt){$scope.selectedCategoryIdLevelOne=categoryId;$scope.showSubCategoryLevelOne=false;$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.checkSubCategoriesLevelOne=[];$scope.checkSubCategoriesLevelTwo=[];$scope.checkSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelOne=[];$scope.listSubCategoriesLevelTwo=[];$scope.listSubCategoriesLevelThree=[];$scope.selectedCategory=categoryId;$scope.selectedCategoryLft=categoryLft;$scope.selectedCategoryRgt=categoryRgt;$scope.disableButton=true;var promiseArray=[];$scope.myPromise=categoryFactory.getSubCategoriesByCategoryId(categoryId).success(function(categ){if(categ.length>0){categ.splice(0,1);$scope.listSubCategoriesLevelOne=categ;$scope.showSubCategoryLevelOne=true;for(var i=0;i<$scope.listSubCategoriesLevelOne.length;i++){promiseArray.push(categoryFactory.hasChildCategories($scope.listSubCategoriesLevelOne[i].categoryId));}
$scope.myPromiseLevelOne=$q.all(promiseArray).then(function(dataArray){for(var i=0;i<dataArray.length;i++)
$scope.checkSubCategoriesLevelOne.push(dataArray[i].data);});}});}
$scope.getSubCategoriesLevelTwo=function(categoryId,categoryLft,categoryRgt){$scope.selectedCategoryIdLevelTwo=categoryId;$scope.disableButton=true;$scope.listSubCategoriesLevelTwo=[];$scope.listSubCategoriesLevelThree=[];$scope.checkSubCategoriesLevelTwo=[];$scope.checkSubCategoriesLevelThree=[];$scope.selectedCategory=categoryId;$scope.selectedCategoryLft=categoryLft;$scope.selectedCategoryRgt=categoryRgt;var promiseArray=[];$scope.myPromiseLevelTwo=categoryFactory.getSubCategoriesByCategoryId(categoryId).success(function(categ){if(categ.length>0){categ.splice(0,1);$scope.listSubCategoriesLevelTwo=categ;$scope.showSubCategoryLevelTwo=true;$scope.showSubCategoryLevelThree=false;$scope.disableButton=true;for(var i=0;i<$scope.listSubCategoriesLevelTwo.length;i++){promiseArray.push(categoryFactory.hasChildCategories($scope.listSubCategoriesLevelTwo[i].categoryId));}
$scope.myPromiseLevelTwo=$q.all(promiseArray).then(function(dataArray){for(var i=0;i<dataArray.length;i++)
$scope.checkSubCategoriesLevelTwo.push(dataArray[i].data);});}else{$scope.disableButton=false;}});}
$scope.getSubCategoriesLevelThree=function(categoryId,categoryLft,categoryRgt){$scope.selectedCategoryIdLevelThree=categoryId;$scope.disableButton=true;$scope.listSubCategoriesLevelThree=[];$scope.selectedCategory=categoryId;$scope.selectedCategoryLft=categoryLft;$scope.selectedCategoryRgt=categoryRgt;var promiseArray=[];$scope.myPromiseLevelThree=categoryFactory.getSubCategoriesByCategoryId(categoryId).success(function(categ){if(categ.length>0){categ.splice(0,1);$scope.listSubCategoriesLevelThree=categ;$scope.showSubCategoryLevelThree=true;$scope.disableButton=true;for(var i=0;i<$scope.listSubCategoriesLevelThree.length;i++){promiseArray.push(categoryFactory.hasChildCategories($scope.listSubCategoriesLevelThree[i].categoryId));}
$scope.myPromiseLevelThree=$q.all(promiseArray).then(function(dataArray){for(var i=0;i<dataArray.length;i++)
$scope.checkSubCategoriesLevelThree.push(dataArray[i].data);});}else{$scope.disableButton=false;}});}
$scope.getSubCategoriesLevelFour=function(categoryId){$scope.selectedCategoryIdLevelFour=categoryId;$scope.selectedCategory=categoryId;$scope.disableButton=false;}
$scope.onSubmit=function(){if($scope.selectedCategory>0){forwardToPostAdNext($scope.selectedCategory,$scope.selectedCategoryLft,$scope.selectedCategoryRgt);}}
function forwardToPostAdNext(categoryId,categoryLft,categoryRgt){dispatcherPostAdNextFactory.forwardToPostAdNext(0,categoryId,categoryLft,categoryRgt);}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdCarController',function($scope,$state,auth,categoryFactory,productFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,$window,coloursEnglish,coloursSomali,$translate,categoryRange,bodyTypeCarSomali,flowFactory,$http,$timeout,$window,bucketName,bodyTypeCarEnglish,fuelTypeCarEnglish,fuelTypeCarSomali,transmissionCarEnglish,transmissionCarSomali,sellerTypeEnglish,sellerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.categoryId;var range=[];$scope.years=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantColours=coloursSomali;$scope.constantBodyType=bodyTypeCarSomali;$scope.constantFuelType=fuelTypeCarSomali;$scope.constantTransmission=transmissionCarSomali;$scope.constantSellerType=sellerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantColours=coloursEnglish;$scope.constantBodyType=bodyTypeCarEnglish;$scope.constantFuelType=fuelTypeCarEnglish;$scope.constantTransmission=transmissionCarEnglish;$scope.constantSellerType=sellerTypeEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;var currentYear=new Date().getFullYear();for(var i=1900;i<currentYear+2;i++){range.push(i);}
$scope.years=range;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'MotorCar',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.selectedModel=function(selected){if(selected){if(typeof selected.originalObject.modelName!="undefined"){$scope.ad.model=selected.originalObject.modelName;return;}else{$scope.ad.model=selected.originalObject;return;}}else{$scope.ad.model=null;}
return;}
$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdCarPartsController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantAge=ageSomali;$scope.constantSellerType=sellerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantAge=ageEnglish;$scope.constantSellerType=sellerTypeEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'MotorCarParts',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdBoatsController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,lengthSomali,lengthEnglish,warrantyEnglish,warrantySomali,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantSellerType=sellerTypeSomali;$scope.constantLength=lengthSomali;$scope.constantAge=ageSomali;$scope.constantWarranty=warrantySomali;}
if($translate.use()==='en_US'){$scope.constantSellerType=sellerTypeEnglish;$scope.constantLength=lengthEnglish;$scope.constantAge=ageEnglish;$scope.constantWarranty=warrantyEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'MotorBoats',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdHeavyVehicleController',function($scope,$state,auth,categoryFactory,productFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,$window,coloursEnglish,coloursSomali,$translate,categoryRange,bodyTypeCarSomali,flowFactory,bucketName,$http,$timeout,horsePowerEnglish,horsePowerSomali,noCylindersEnglish,noCylindersSomali,bodyTypeCarEnglish,fuelTypeCarEnglish,fuelTypeCarSomali,transmissionCarEnglish,transmissionCarSomali,sellerTypeEnglish,sellerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.categoryId;var range=[];$scope.years=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantColours=coloursSomali;$scope.constantBodyType=bodyTypeCarSomali;$scope.constantFuelType=fuelTypeCarSomali;$scope.constantTransmission=transmissionCarSomali;$scope.constantSellerType=sellerTypeSomali;$scope.constantNoCylinders=noCylindersSomali;$scope.constantHorsePower=horsePowerSomali;}
if($translate.use()==='en_US'){$scope.constantColours=coloursEnglish;$scope.constantBodyType=bodyTypeCarEnglish;$scope.constantFuelType=fuelTypeCarEnglish;$scope.constantTransmission=transmissionCarEnglish;$scope.constantSellerType=sellerTypeEnglish;$scope.constantNoCylinders=noCylindersEnglish;$scope.constantHorsePower=horsePowerEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;var currentYear=new Date().getFullYear();for(var i=1900;i<currentYear+2;i++){range.push(i);}
$scope.years=range;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'MotorHeavyVehicle',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdMotorCycleController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantAge=ageSomali;$scope.constantSellerType=sellerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantAge=ageEnglish;$scope.constantSellerType=sellerTypeEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'MotorCycles',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdSaleResidentialController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,noBedroomsVillaEnglish,noBedroomsVillaSomali,noBedroomsApartmentSomali,noBedroomsApartmentEnglish,noBathroomsEnglish,noBathroomsSomali,ownerTypeEnglish,ownerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){$scope.categoryId=$stateParams.categoryId;fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){if($scope.categoryId==326)
$scope.constantNoBedrooms=noBedroomsVillaSomali;else if($scope.categoryId==327)
$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;}
if($translate.use()==='en_US'){if($scope.categoryId==326)
$scope.constantNoBedrooms=noBedroomsVillaEnglish;else if($scope.categoryId==327)
$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertySaleRes',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdSaleCommercialController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,ownerTypeEnglish,ownerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;if($translate.use()==='so_SO'){$scope.constantOwnerType=ownerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantOwnerType=ownerTypeEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertySaleComm',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdSaleLandController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,$http,$timeout,bucketName,ownerTypeEnglish,ownerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;if($translate.use()==='so_SO'){$scope.constantOwnerType=ownerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantOwnerType=ownerTypeEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertySaleLand',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdSaleUnitsController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,$http,$timeout,bucketName,ownerTypeEnglish,ownerTypeSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){$scope.categoryId=$stateParams.categoryId;fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantOwnerType=ownerTypeSomali;}
if($translate.use()==='en_US'){$scope.constantOwnerType=ownerTypeEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertySaleUnits',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdRentResidentialController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,noBedroomsVillaEnglish,noBedroomsVillaSomali,noBedroomsApartmentSomali,noBedroomsApartmentEnglish,noBathroomsEnglish,noBathroomsSomali,ownerTypeEnglish,ownerTypeSomali,rentTimeSomali,rentTimeEnglish,furnishedEnglish,furnishedSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;if($translate.use()==='so_SO'){if($scope.categoryId==342)
$scope.constantNoBedrooms=noBedroomsVillaSomali;else if($scope.categoryId==343)
$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;}
if($translate.use()==='en_US'){if($scope.categoryId==342)
$scope.constantNoBedrooms=noBedroomsVillaEnglish;else if($scope.categoryId==343)
$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertyRentRes',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdRentCommercialController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,ownerTypeEnglish,ownerTypeSomali,rentTimeSomali,rentTimeEnglish,furnishedEnglish,furnishedSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;if($translate.use()==='so_SO'){$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;}
if($translate.use()==='en_US'){$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertyRentComm',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdRentRoomController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,noBathroomsEnglish,noBathroomsSomali,ownerTypeEnglish,ownerTypeSomali,rentTimeSomali,rentTimeEnglish,furnishedEnglish,furnishedSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;if($translate.use()==='so_SO'){$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;}
if($translate.use()==='en_US'){$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertyRentRoom',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdRentShortTermController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,noBedroomsVillaEnglish,noBedroomsVillaSomali,noBedroomsApartmentSomali,noBedroomsApartmentEnglish,noBathroomsEnglish,noBathroomsSomali,ownerTypeEnglish,ownerTypeSomali,rentTimeSomali,rentTimeEnglish,furnishedEnglish,furnishedSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){$scope.categoryId=$stateParams.categoryId;fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){if($scope.categoryId==355)
$scope.constantNoBedrooms=noBedroomsVillaSomali;else if($scope.categoryId==354)
$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;}
if($translate.use()==='en_US'){if($scope.categoryId==355)
$scope.constantNoBedrooms=noBedroomsVillaEnglish;else if($scope.categoryId==354)
$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertyRentShortMonthly',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdRentHotelsController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,$http,$timeout,noBedroomsVillaEnglish,noBedroomsVillaSomali,noBedroomsApartmentSomali,noBedroomsApartmentEnglish,noBathroomsEnglish,noBathroomsSomali,ownerTypeEnglish,ownerTypeSomali,rentTimeSomali,rentTimeEnglish,furnishedEnglish,furnishedSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){$scope.categoryId=$stateParams.categoryId;fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){if($scope.categoryId==358)
$scope.constantNoBedrooms=noBedroomsVillaSomali;else if($scope.categoryId==357)
$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;}
if($translate.use()==='en_US'){if($scope.categoryId==358)
$scope.constantNoBedrooms=noBedroomsVillaEnglish;else if($scope.categoryId==357)
$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;}
getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'PropertyRentHotel',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.selectedNeighbourhood=function(selected){if(selected){if(typeof selected.originalObject.neighbourhoodName!="undefined"){$scope.ad.neighbourhood=selected.originalObject.neighbourhoodName;return;}else{$scope.ad.neighbourhood=selected.originalObject;return;}}else{$scope.ad.neighbourhood=null;}
return;}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdClassifiedController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,conditionSomali,conditionEnglish,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantSellerType=sellerTypeSomali;$scope.constantCondition=conditionSomali;$scope.constantAge=ageSomali;}
if($translate.use()==='en_US'){$scope.constantSellerType=sellerTypeEnglish;$scope.constantCondition=conditionEnglish;$scope.constantAge=ageEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_BABY_ITEMS_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_BABY_ITEMS_MAX)
{$scope.ad={type:'ClassifiedBabyItems',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_BOOKS_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_BOOKS_MAX)
{$scope.ad={type:'ClassifiedBooks',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_BUSINESS_INDUSTRIAL_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_BUSINESS_INDUSTRIAL_MAX)
{$scope.ad={type:'ClassifiedBusinessIndustrial',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_CLOTHING_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_CLOTHING_MAX)
{$scope.ad={type:'ClassifiedClothing',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_COLLECTIBLES_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_COLLECTIBLES_MAX)
{$scope.ad={type:'ClassifiedCollectibles',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_COMPUTER_NETWORKING_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_COMPUTER_NETWORKING_MAX)
{$scope.ad={type:'ClassifiedNetworking',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_ELECTRONICS_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_ELECTRONICS_MAX)
{$scope.ad={type:'ClassifiedElectronics',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_FURNITURE_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_FURNITURE_MAX)
{$scope.ad={type:'ClassifiedFurniture',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_GAMING_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_GAMING_MAX)
{$scope.ad={type:'ClassifiedGaming',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_HOME_APPLIANCES_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_HOME_APPLIANCES_MAX)
{$scope.ad={type:'ClassifiedHomeAppliances',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_JEWELRY_WATCHES_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_JEWELRY_WATCHES_MAX)
{$scope.ad={type:'ClassifiedJewelry',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_MISC_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_MISC_MAX)
{$scope.ad={type:'ClassifiedMisc',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_MOBILE_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_MOBILE_MAX)
{$scope.ad={type:'ClassifiedMobile',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_SPORTS_EQUIPMENT_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_SPORTS_EQUIPMENT_MAX)
{$scope.ad={type:'ClassifiedSportsEquipment',productPriority:0,imageStatus:'IMAGE_PENDING'};}
else if($scope.categoryObject.lft>=categoryRange.CLASSIFIED_TOYS_MIN&&$scope.categoryObject.rgt<=categoryRange.CLASSIFIED_TOYS_MAX)
{console.log("ClassifiedToys");$scope.ad={type:'ClassifiedToys',productPriority:0,imageStatus:'IMAGE_PENDING'};}
$scope.ad.location=mapFactory.init();});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdClassifiedCameraController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,warrantyEnglish,warrantySomali,$http,$timeout,conditionSomali,conditionEnglish,ageEnglish,ageSomali,cameraBrand){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantWarranty=warrantySomali;$scope.constantCondition=conditionSomali;$scope.constantAge=ageSomali;$scope.constantCameraBrand=cameraBrand;}
if($translate.use()==='en_US'){$scope.constantWarranty=warrantyEnglish;$scope.constantCondition=conditionEnglish;$scope.constantAge=ageEnglish;$scope.constantCameraBrand=cameraBrand;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'ClassifiedCameras',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdClassifiedComputerController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,bucketName,$window,$translate,categoryRange,flowFactory,$http,$timeout,conditionSomali,conditionEnglish,ageEnglish,ageSomali,warrantySomali,warrantyEnglish,computerHardDrive,computerProcessor,computerMemory,computerBrand){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantWarranty=warrantySomali;$scope.constantCondition=conditionSomali;$scope.constantAge=ageSomali;$scope.constantComputerBrand=computerBrand;$scope.constantHardDrive=computerHardDrive;$scope.constantComputerMemory=computerMemory;$scope.constantComputerProcessor=computerProcessor;}
if($translate.use()==='en_US'){$scope.constantWarranty=warrantyEnglish;$scope.constantCondition=conditionEnglish;$scope.constantAge=ageEnglish;$scope.constantComputerBrand=computerBrand;$scope.constantHardDrive=computerHardDrive;$scope.constantComputerMemory=computerMemory;$scope.constantComputerProcessor=computerProcessor;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'ClassifiedComputers',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdClassifiedPetsController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,conditionSomali,conditionEnglish,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();if($translate.use()==='so_SO'){$scope.constantSellerType=sellerTypeSomali;$scope.constantCondition=conditionSomali;$scope.constantAge=ageSomali;}
if($translate.use()==='en_US'){$scope.constantSellerType=sellerTypeEnglish;$scope.constantCondition=conditionEnglish;$scope.constantAge=ageEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'Product',productPriority:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdCommunityController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,bucketName,sellerTypeEnglish,sellerTypeSomali,$http,$timeout,conditionSomali,conditionEnglish,ageEnglish,ageSomali){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});$scope.existingImageObjectTwo=flowFactory.create({singleFile:true});$scope.existingImageObjectThree=flowFactory.create({singleFile:true});$scope.existingImageObjectFour=flowFactory.create({singleFile:true});$scope.existingImageObjectFive=flowFactory.create({singleFile:true});$scope.existingImageObjectSix=flowFactory.create({singleFile:true});(function init(){fileUploaderFactory.initializeFileUploader();$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'Product',productPriority:0,productPrice:0,imageStatus:'IMAGE_PENDING'};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(productIndex,imageIndex,product){for(var i=0;i<product.images.length;i++){if(product.images[i].imageIndex==0){var tempZero=product.images[i].imageName;$scope.promiseExistingImageObjectZero=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempZero;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==1){var tempOne=product.images[i].imageName;$scope.promiseExistingImageObjectOne=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempOne;$scope.existingImageObjectOne.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==2){var tempTwo=product.images[i].imageName;$scope.promiseExistingImageObjectTwo=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempTwo;$scope.existingImageObjectTwo.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==3){var tempThree=product.images[i].imageName;$scope.promiseExistingImageObjectThree=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempThree;$scope.existingImageObjectThree.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==4){var tempFour=product.images[i].imageName;$scope.promiseExistingImageObjectFour=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFour;$scope.existingImageObjectFour.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==5){var tempFive=product.images[i].imageName;$scope.promiseExistingImageObjectFive=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempFive;$scope.existingImageObjectFive.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
else if(product.images[i].imageIndex==6){var tempSix=product.images[i].imageName;$scope.promiseExistingImageObjectSix=$http.get($scope.S3_URL+product.productId+'/'+product.images[i].imageName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=tempSix;$scope.existingImageObjectSix.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}}}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;$scope.ad.productPrice=0;locationIdObject={locationId:$scope.ad.location.locationId};for(var i=0;i<$scope.ad.images.length;i++){getImageFromAmazon(i,$scope.ad.images[i].imageIndex,$scope.ad);}});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.removeFile=function(index){fileUploaderFactory.removeFile(index);}
$scope.fileUploadedSuccessfully=function(file,index){fileUploaderFactory.fileUploadedSuccessfully(file,index);}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('PostAdJobController',function($scope,$state,auth,categoryFactory,categoryRange,$stateParams,mapFactory,fileUploaderFactory,productFactory,$window,$translate,categoryRange,flowFactory,$http,$timeout,bucketName,careerLevelEnglish,careerLevelSomali,employmentTypeEnglish,employmentTypeSomali,workExperienceEnglish,workExperienceSomali,educationLevelEnglish,educationLevelSomali,monthSalaryEnglish,monthSalarySomali,educationLevelEnglish,educationLevelSomali,monthSalaryEnglish,monthSalarySomali,cvRequiredSomali,cvRequiredEnglish,listedBySomali,listedByEnglish,companySizeEnglish,companySizeSomali,errorsConstant,hideCompanyNameSomali,hideCompanyNameEnglish){$scope.bucketName=bucketName;$scope.postAdErrorMessage=null;$scope.postAdError=false;$scope.listRootCategories=[];$scope.categoryObject=[];$scope.productId;var locationIdObject=null;$scope.S3_URL=bucketName.productImages;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});(function init(){if($translate.use()==='so_SO'){$scope.constantCareerLevel=careerLevelSomali;$scope.constantEmploymentType=employmentTypeSomali;$scope.constantWorkExperience=workExperienceSomali;$scope.constantEducationLevel=educationLevelSomali;$scope.constantMonthSalary=monthSalarySomali;$scope.constantCVRequired=cvRequiredSomali;$scope.constantListedBy=listedBySomali;$scope.constantCompanySize=companySizeSomali;$scope.constantHideCompanyName=hideCompanyNameSomali;}
else if($translate.use()==='en_US'){$scope.constantCareerLevel=careerLevelEnglish;$scope.constantEmploymentType=employmentTypeEnglish;$scope.constantWorkExperience=workExperienceEnglish;$scope.constantEducationLevel=educationLevelEnglish;$scope.constantMonthSalary=monthSalaryEnglish;$scope.constantCVRequired=cvRequiredEnglish;$scope.constantListedBy=listedByEnglish;$scope.constantCompanySize=companySizeEnglish;$scope.constantHideCompanyName=hideCompanyNameEnglish;}
$scope.categoryId=$stateParams.categoryId;getRootCategoriesByCategoryId($scope.categoryId);$scope.telephone=auth.authenticatedTelephone;$scope.productId=$stateParams.productId;if($scope.productId>0){findProductByProductId($scope.productId);$scope.updateButton=true;}
else{$scope.ad={type:'JobEntity',productPriority:0,productPrice:0};$scope.ad.location=mapFactory.init();}})();$scope.saveProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'||$scope.ad.productLanguage==false){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.location=$scope.ad.location;$scope.myPromise=productFactory.saveProduct(fileUploaderFactory.getFiles(),$scope.ad,$scope.location,$stateParams.categoryId,auth.authenticatedUserId,$scope.telephone,$scope.logoImage).success(function(result){$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
$scope.updateProduct=function(isValid){$scope.postAdError=false;$scope.postAdErrorMessage='';if(!isValid){$scope.postAdError=true;$scope.postAdErrorMessage='There are incomplete required fields. Please complete them';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return;}
if(typeof $scope.ad.productLanguage==='undefined'){$scope.postAdError=true;$scope.postAdErrorMessage='Tick language for your ad.';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}
else{$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);angular.extend($scope.ad.location,locationIdObject,$scope.ad.location);$scope.myPromise=productFactory.updateProduct(fileUploaderFactory.getFiles(),$scope.ad,auth.authenticatedUserId,$scope.telephone,$scope.logoImage).success(function(result){auth.authenticatedTelephone=$scope.telephone;$state.go("success_ad",{productId:result,categoryId:$scope.categoryId,categoryLft:$scope.categoryObject.lft,categoryRgt:$scope.categoryObject.rgt});});}}
function getImageFromAmazon(userId,bucket,fileName){$scope.promiseExistingImageObjectZero=$http.get(bucket+userId+'/'+fileName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=fileName;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});}
function findProductByProductId(productId){productFactory.findProductWithoutUserByProductId($stateParams.productId).success(function(data){$scope.ad=data;$scope.ad.productPrice=0;locationIdObject={locationId:$scope.ad.location.locationId};if(data.logoPhoto)
getImageFromAmazon(productId,bucketName.productLogo,data.logoPhoto);});}
function getRootCategoriesByCategoryId(categoryId){categoryFactory.getRootCategoriesByCategoryId(categoryId).success(function(data){$scope.listRootCategories=data;$scope.categoryObject=$scope.listRootCategories[$scope.listRootCategories.length-1];});}
$scope.errors=[];$scope.validate=function(file){$scope.postAdError=false;$scope.postAdErrorMessage='';if(file.size>20000){$scope.postAdError=true;$scope.postAdErrorMessage=errorsConstant.ERROR01;$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);return false;}
return true;}
$scope.removeFile=function(index){$scope.logoImage=null;}
$scope.fileUploadedSuccessfully=function(file){$scope.logoImage=file;}
$scope.addMarker=function(event){$scope.ad.location=mapFactory.addMarker(event);};$scope.dateOptions={startingDay:1};$scope.format='dd-MMMM-yyyy',$scope.popupDatePicker={opened:false};$scope.openDatePicker=function(){$scope.popupDatePicker.opened=true;};});var hashiApp=angular.module('hashiApp')
hashiApp.controller('ListingController',function($scope,$http,productFactory,$stateParams,categoryRange,bucketName,$window,cityFactory,categoryFactory,sellerTypeSearchSomali,sellerTypeSearchEnglish,searchTypeConstant,categoryIdConstant,$translate,noBedroomsApartmentEnglish,noBedroomsApartmentSomali,sellerTypeEnglish,sellerTypeSomali,coloursEnglish,coloursSomali,noBathroomsEnglish,noBathroomsSomali,warrantySomali,warrantyEnglish,ageEnglish,ageSomali,lengthEnglish,lengthSomali,conditionSomali,conditionEnglish,ownerTypeEnglish,ownerTypeSomali,furnishedSomali,furnishedEnglish,rentTimeEnglish,rentTimeSomali,computerBrand,computerHardDrive,dispatcherDetailsFactory,employmentTypeEnglish,employmentTypeSomali,workExperienceEnglish,workExperienceSomali,educationLevelEnglish,educationLevelSomali,monthSalaryEnglish,monthSalarySomali){$scope.currentPage=1;$scope.categoryRange=categoryRange;$scope.orderProp='productPriority';$scope.sortingArray={sortColumn:'productPriority',sortDirection:'desc'};$scope.selectedCityId=0;$scope.categoryLevelOneObject=[];$scope.categoryLevelTwoObject=[];$scope.categoryLevelThreeObject=[];$scope.categoryLevelFourObject=[];$scope.finalSelectedCategoryId=0;$scope.selectedCategoryIdLevelOne=2;$scope.selectedCategoryIdLevelTwo=0;$scope.selectedCategoryIdLevelThree=0;$scope.selectedCategoryIdLevelFour=0;$scope.showSubCategoryLevelOne=false;$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.searchType;$scope.searchText;$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;$scope.years=[];$scope.priceFrom;$scope.priceTo;$scope.yearMin;$scope.yearMax;$scope.KMFrom;$scope.KMTo;$scope.bedroomMin;$scope.bedroomMax;$scope.sellerType=0;$scope.bucketName=bucketName;(function init(){if($translate.use()==='so_SO'){$scope.listSellerTypes=sellerTypeSearchSomali;$scope.sellerTypeConstant=sellerTypeSomali;$scope.colourConstant=coloursSomali;$scope.ageConstant=ageSomali;$scope.warrantyConstant=warrantySomali;$scope.lengthConstant=lengthSomali;$scope.constantNoBedrooms=noBedroomsApartmentSomali;$scope.constantNoBathrooms=noBathroomsSomali;$scope.constantOwnerType=ownerTypeSomali;$scope.constantRentTime=rentTimeSomali;$scope.constantFurnished=furnishedSomali;$scope.constantCondition=conditionSomali;$scope.constantComputerBrand=computerBrand;$scope.constantComputerHardDrive=computerHardDrive;$scope.constantEmploymentType=employmentTypeSomali;$scope.constantWorkExperience=workExperienceSomali;$scope.constantEducationLevel=educationLevelSomali;$scope.constantMonthSalary=monthSalarySomali;}
if($translate.use()==='en_US'){$scope.listSellerTypes=sellerTypeSearchEnglish;$scope.colourConstant=coloursEnglish;$scope.sellerTypeConstant=sellerTypeEnglish;$scope.ageConstant=ageEnglish;$scope.warrantyConstant=warrantyEnglish;$scope.lengthConstant=lengthEnglish;$scope.constantNoBedrooms=noBedroomsApartmentEnglish;$scope.constantNoBathrooms=noBathroomsEnglish;$scope.constantOwnerType=ownerTypeEnglish;$scope.constantRentTime=rentTimeEnglish;$scope.constantFurnished=furnishedEnglish;$scope.constantCondition=conditionEnglish;$scope.constantComputerBrand=computerBrand;$scope.constantComputerHardDrive=computerHardDrive;$scope.constantEmploymentType=employmentTypeEnglish;$scope.constantWorkExperience=workExperienceEnglish;$scope.constantEducationLevel=educationLevelEnglish;$scope.constantMonthSalary=monthSalaryEnglish;}
setSearchType($stateParams.searchType);initializeSearchTypeFields($scope.searchType);if($scope.searchType===searchTypeConstant.ADVANCE_SEARCH||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_CAR||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_BOATS||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_SALE_RES||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_SALE_COMM||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_SALE_LAND||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_RENT_RES||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_RENT_COMM||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_JOB||$scope.searchType===searchTypeConstant.ADVANCE_SEARCH_COMMUNITY){$scope.selectedCityId=$stateParams.advSelectedCityId;$scope.finalSelectedCategoryId=$stateParams.advFinalSelectedCategoryId;$scope.selectedCategoryIdLevelOne=$stateParams.advSelectedCategoryIdLevelOne;$scope.selectedCategoryIdLevelTwo=$stateParams.advSelectedCategoryIdLevelTwo;$scope.selectedCategoryIdLevelThree=$stateParams.advSelectedCategoryIdLevelThree;$scope.selectedCategoryIdLevelFour=$stateParams.advSelectedCategoryIdLevelFour;$scope.searchText=$stateParams.advSearchText;initializeCities();initializeSubCategoriesLevelOne();initializeSubCategoriesLevelTwo();initializeSubCategoriesLevelThree();initializeSubCategoriesLevelFour();var searchObject=createSearchObject($scope.searchType);advanceSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,0,searchObject);}
else{initializeCities();initializeSubCategoriesLevelOne();getCityNameByCityId($scope.selectedCityId);basicSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,0);}})();function advanceSearch(selectedCityId,finalSelectedCategoryId,searchText,pageIndex,searchObject){$scope.myPromise=productFactory.advanceSearch(selectedCityId,finalSelectedCategoryId,searchText,pageIndex,$scope.sortingArray.sortColumn,$scope.sortingArray.sortDirection,searchObject).success(function(data){$scope.ads=data;});productFactory.countProductsByDepth(finalSelectedCategoryId,selectedCityId).success(function(data){$scope.countProductByDepth=data;});getCityNameByCityId($scope.selectedCityId);}
$scope.search=function(){var searchObject=createSearchObject($scope.searchType);advanceSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,0,searchObject);}
$scope.getSubCategoriesLevelTwo=function(category){hideAdvanceSearchDiv(category.categoryId);$scope.showSubCategoryLevelTwo=false;$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.selectedCategoryIdLevelTwo=0;$scope.selectedCategoryIdLevelThree=0;$scope.selectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelTwo=[];$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];$scope.finalSelectedCategoryId=category.categoryId;$scope.selectedCategoryIdLevelOne=category.categoryId;categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelTwo=categ;$scope.categoryLevelTwoObject=$scope.listSubCategoriesLevelTwo[0];$scope.selectedCategoryIdLevelTwo=$scope.listSubCategoriesLevelTwo[0].categoryId;$scope.showSubCategoryLevelTwo=true;}});}
$scope.getSubCategoriesLevelThree=function(category){$scope.showSubCategoryLevelThree=false;$scope.showSubCategoryLevelFour=false;$scope.selectedCategoryIdLevelThree=0;$scope.selectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelThree=[];$scope.listSubCategoriesLevelFour=[];if(category){hideAdvanceSearchDiv(category.categoryId);showAdvanceSearchDiv(category.categoryId);if(!category.categoryName.match(">")){$scope.finalSelectedCategoryId=category.categoryId;$scope.selectedCategoryIdLevelThree=category.categoryId;}else{$scope.finalSelectedCategoryId=$scope.selectedCategoryIdLevelOne;$scope.selectedCategoryIdLevelTwo=$scope.selectedCategoryIdLevelOne;setSearchTypeByCategoryId($scope.finalSelectedCategoryId);}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelThree=categ;$scope.categoryLevelThreeObject=$scope.listSubCategoriesLevelThree[0];$scope.selectedCategoryIdLevelThree=$scope.listSubCategoriesLevelThree[0].categoryId;$scope.showSubCategoryLevelThree=true;}});}}
$scope.getSubCategoriesLevelFour=function(category){$scope.showSubCategoryLevelFour=false;$scope.selectedCategoryIdLevelFour=0;$scope.listSubCategoriesLevelFour=[];if(category){if(!category.categoryName.match(">")){$scope.finalSelectedCategoryId=category.categoryId;$scope.selectedCategoryIdLevelFour=category.categoryId;}else{$scope.finalSelectedCategoryId=$scope.selectedCategoryIdLevelTwo;$scope.selectedCategoryIdLevelThree=$scope.selectedCategoryIdLevelTwo;}
categoryFactory.getSubCategoriesByCategoryId(category.categoryId).success(function(categ){if(categ.length>0){$scope.listSubCategoriesLevelFour=categ;$scope.categoryLevelFourObject=$scope.listSubCategoriesLevelFour[0];$scope.selectedCategoryIdLevelFour=$scope.listSubCategoriesLevelFour[0].categoryId;$scope.showSubCategoryLevelFour=true;}});}}
$scope.getSubCategoriesLevelFive=function(category){if(category){if(!category.categoryName.match(">")){$scope.finalSelectedCategoryId=category.categoryId;$scope.selectedCategoryIdLevelFour=category.categoryId;}else{$scope.finalSelectedCategoryId=$scope.advSelectedCategoryIdLevelThree;$scope.selectedCategoryIdLevelFour=$scope.advSelectedCategoryIdLevelThree;}}}
$scope.getTotalPages=function(totalPages){return new Array(totalPages);}
$scope.resetSorting=function(){createSortingArray($scope.orderProp);if($stateParams.searchType===searchTypeConstant.BASIC_SEARCH){basicSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,0);}else{var searchObject=createSearchObject($stateParams.searchType);advanceSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,0,searchObject);$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}}
$scope.getNextPageAds=function(){createSortingArray($scope.orderProp);if($stateParams.searchType===searchTypeConstant.BASIC_SEARCH){basicSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,$scope.currentPage-1);$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}else{var searchObject=createSearchObject($stateParams.searchType);advanceSearch($scope.selectedCityId,$scope.finalSelectedCategoryId,$scope.searchText,$scope.currentPage-1,searchObject);$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);}}
function basicSearch(selectedCityId,finalSelectedCategoryId,searchText,pageIndex){$scope.myPromise=productFactory.basicSearch(selectedCityId,finalSelectedCategoryId,searchText,pageIndex,$scope.sortingArray.sortColumn,$scope.sortingArray.sortDirection).success(function(data){$scope.ads=data;});productFactory.countProductsByDepth(finalSelectedCategoryId,selectedCityId).success(function(data){$scope.countProductByDepth=data;});}
function initializeCities(){cityFactory.getCities().success(function(data){$scope.listCities=data;});}
function getCityNameByCityId(cityId){cityFactory.getCityName(cityId).success(function(data){$scope.cityName=data.cityName.indexOf(">")>-1==false?data.cityName+', Somalia':'Somalia';});}
function initializeSubCategoriesLevelOne(){categoryFactory.getRootCategories().success(function(data){$scope.listSubCategoriesLevelOne=data;$scope.categoryLevelOneObject=getCategoryByCategoryId($scope.listSubCategoriesLevelOne,$scope.selectedCategoryIdLevelOne);});}
function initializeSubCategoriesLevelTwo(){$scope.showSubCategoryLevelTwo=false;if($scope.selectedCategoryIdLevelTwo>0){categoryFactory.getSubCategoriesByCategoryId($scope.selectedCategoryIdLevelOne).success(function(data){$scope.listSubCategoriesLevelTwo=data;$scope.categoryLevelTwoObject=$scope.selectedCategoryIdLevelOne==$scope.selectedCategoryIdLevelTwo?$scope.listSubCategoriesLevelTwo[0]:getCategoryByCategoryId($scope.listSubCategoriesLevelTwo,$scope.selectedCategoryIdLevelTwo);$scope.showSubCategoryLevelTwo=true;});}}
function initializeSubCategoriesLevelThree(){$scope.showSubCategoryLevelThree=false;if($scope.selectedCategoryIdLevelThree>0){categoryFactory.getSubCategoriesByCategoryId($scope.selectedCategoryIdLevelTwo).success(function(data){$scope.listSubCategoriesLevelThree=data;$scope.categoryLevelThreeObject=$scope.selectedCategoryIdLevelTwo==$scope.selectedCategoryIdLevelThree?$scope.listSubCategoriesLevelThree[0]:getCategoryByCategoryId($scope.listSubCategoriesLevelThree,$scope.selectedCategoryIdLevelThree);$scope.showSubCategoryLevelThree=true;});}}
function initializeSubCategoriesLevelFour(){$scope.showSubCategoryLevelFour=false;if($scope.selectedCategoryIdLevelFour>0){categoryFactory.getSubCategoriesByCategoryId($scope.selectedCategoryIdLevelThree).success(function(data){$scope.listSubCategoriesLevelFour=data;$scope.categoryLevelFourObject=$scope.selectedCategoryIdLevelThree==$scope.selectedCategoryIdLevelFour?$scope.listSubCategoriesLevelFour[0]:getCategoryByCategoryId($scope.listSubCategoriesLevelFour,$scope.selectedCategoryIdLevelFour);$scope.showSubCategoryLevelFour=true;});}}
function createSearchObject(searchTypeParam){switch(searchTypeParam){case searchTypeConstant.ADVANCE_SEARCH:var searchObject={type:searchTypeParam};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_CAR:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,yearMin:$scope.yearMin,yearMax:$scope.yearMax,kmFrom:$scope.KMFrom,kmTo:$scope.KMTo,sellerType:$scope.sellerType};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,sellerType:$scope.sellerType};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_BOATS:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,sellerType:$scope.sellerType};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,yearMin:$scope.yearMin,yearMax:$scope.yearMax,kmFrom:$scope.KMFrom,kmTo:$scope.KMTo,sellerType:$scope.sellerType};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,sellerType:$scope.sellerType};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_SALE_RES:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,bedroomMin:$scope.bedroomMin,bedroomMax:$scope.bedroomMax};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_SALE_COMM:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_SALE_LAND:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_RENT_RES:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,bedroomMin:$scope.bedroomMin,bedroomMax:$scope.bedroomMax};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_RENT_COMM:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo,bedroomMin:$scope.bedroomMin,bedroomMax:$scope.bedroomMax};return searchObject;case searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED:var searchObject={type:searchTypeParam,priceFrom:$scope.priceFrom,priceTo:$scope.priceTo};return searchObject;default:console.log('Create Search Object : Default case.');}}
function setSearchType(searchType){switch(searchType){case searchTypeConstant.BASIC_SEARCH:$scope.searchType=searchTypeConstant.BASIC_SEARCH;break;case searchTypeConstant.ADVANCE_SEARCH_JOB:$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_JOB;break;case searchTypeConstant.ADVANCE_SEARCH:$scope.searchType=searchTypeConstant.ADVANCE_SEARCH;break;case searchTypeConstant.ADVANCE_SEARCH_CAR:$scope.showAdvanceSearchCarDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_CAR;break;case searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS:$scope.showAdvanceSearchCarPartsDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS;break;case searchTypeConstant.ADVANCE_SEARCH_BOATS:$scope.showAdvanceSearchBoatsDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_BOATS;break;case searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE:$scope.showAdvanceSearchHeavyVehicleDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE;break;case searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE:$scope.showAdvanceSearchMotorcycleDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_RES:$scope.showAdvanceSearchSaleResDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_SALE_RES;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_COMM:$scope.showAdvanceSearchSaleCommDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_SALE_COMM;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS:$scope.showAdvanceSearchSaleUnitsDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_LAND:$scope.showAdvanceSearchSaleLandDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_SALE_LAND;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_RES:$scope.showAdvanceSearchRentResDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_RENT_RES;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_COMM:$scope.showAdvanceSearchRentCommDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_RENT_COMM;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM:$scope.showAdvanceSearchRentRoomDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL:$scope.showAdvanceSearchRentHotelDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY:$scope.showAdvanceSearchRentShortMonthlyDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY;break;case searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED:$scope.showAdvanceSearchClassifiedDiv=true;$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED;break;case searchTypeConstant.ADVANCE_SEARCH_COMMUNITY:$scope.searchType=searchTypeConstant.ADVANCE_SEARCH_COMMUNITY;break;default:console.log('Default case setSearchType');}}
function setSearchTypeByCategoryId(categoryId){if(categoryId==categoryIdConstant.MOTOR_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH);return;}
else if(categoryId==categoryIdConstant.CAR_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CAR);return;}else if(categoryId==categoryIdConstant.CAR_PARTS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS);return;}else if(categoryId==categoryIdConstant.BOATS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_BOATS);return;}else if(categoryId==categoryIdConstant.HEAVY_VEHICLE_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE);return;}else if(categoryId==categoryIdConstant.MOTORCYCLES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE);return;}else if(categoryId==categoryIdConstant.SALE_RES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_RES);return;}else if(categoryId==categoryIdConstant.SALE_COMM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_COMM);return;}else if(categoryId==categoryIdConstant.SALE_UNITS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS);return;}else if(categoryId==categoryIdConstant.SALE_LAND_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_LAND);return;}else if(categoryId==categoryIdConstant.RENT_RES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_RES);return;}
else if(categoryId==categoryIdConstant.RENT_COMM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_COMM);return;}
else if(categoryId==categoryIdConstant.RENT_ROOM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM);return;}
else if(categoryId==categoryIdConstant.RENT_HOTEL_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL);return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_IDEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_IDEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);return;}
else{console.log('we should be here, please check this case. setSearchTypeByCategoryId()');}}
function initializeSearchTypeFields(searchType){switch(searchType){case searchTypeConstant.BASIC_SEARCH:$scope.selectedCityId=$stateParams.basicSelectedCityId;$scope.finalSelectedCategoryId=$stateParams.basicSelectedCategoryId;$scope.selectedCategoryIdLevelOne=$stateParams.basicSelectedCategoryId;$scope.searchText=$stateParams.basicSearchText;break;case searchTypeConstant.ADVANCE_SEARCH_CAR:initializeYears();$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.yearMin=$stateParams.advYearMin;$scope.yearMax=$stateParams.advYearMax;$scope.KMFrom=$stateParams.advKMFrom;$scope.KMTo=$stateParams.advKMTo;$scope.sellerType=$stateParams.advSellerType;break;case searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.sellerType=$stateParams.advSellerType;break;case searchTypeConstant.ADVANCE_SEARCH_BOATS:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.sellerType=$stateParams.advSellerType;break;case searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.yearMin=$stateParams.advYearMin;$scope.yearMax=$stateParams.advYearMax;$scope.KMFrom=$stateParams.advKMFrom;$scope.KMTo=$stateParams.advKMTo;$scope.sellerType=$stateParams.advSellerType;initializeYears();break;case searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.sellerType=$stateParams.advSellerType;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_RES:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.bedroomMax=$stateParams.advBedroomMax;$scope.bedroomMin=$stateParams.advBedroomMin;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_COMM:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_SALE_LAND:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_RES:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.bedroomMax=$stateParams.advBedroomMax;$scope.bedroomMin=$stateParams.advBedroomMin;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_COMM:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;case searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;$scope.bedroomMax=$stateParams.advBedroomMax;$scope.bedroomMin=$stateParams.advBedroomMin;break;case searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED:$scope.priceFrom=$stateParams.advPriceFrom;$scope.priceTo=$stateParams.advPriceTo;break;default:console.log('Default case setSearchType');}}
function createSortingArray(orderProp){switch(orderProp){case'-created':$scope.sortingArray.sortColumn='created';$scope.sortingArray.sortDirection='desc';break;case'created':$scope.sortingArray.sortColumn='created';$scope.sortingArray.sortDirection='asc';break;case'productPrice':$scope.sortingArray.sortColumn='productPrice';$scope.sortingArray.sortDirection='asc';break;case'-productPrice':$scope.sortingArray.sortColumn='productPrice';$scope.sortingArray.sortDirection='desc';break;case'productPriority':$scope.sortingArray.sortColumn='productPriority';$scope.sortingArray.sortDirection='desc';break;default:console.log('Default case.');}}
function getCategoryByCategoryId(categories,categoryIdParam){for(var i=0;i<categories.length;i++){if(categories[i].categoryId==categoryIdParam){return categories[i];}}}
function showAdvanceSearchDiv(categoryId){if(categoryId==categoryIdConstant.CAR_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CAR);initializeYears();$scope.showAdvanceSearchCarDiv=true;return;}else if(categoryId==categoryIdConstant.CAR_PARTS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CAR_PARTS);$scope.showAdvanceSearchCarPartsDiv=true;return;}else if(categoryId==categoryIdConstant.BOATS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_BOATS);$scope.showAdvanceSearchBoatsDiv=true;return;}else if(categoryId==categoryIdConstant.HEAVY_VEHICLE_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_HEAVY_VEHICLE);$scope.showAdvanceSearchHeavyVehicleDiv=true;return;}else if(categoryId==categoryIdConstant.MOTORCYCLES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_MOTORCYCLE);$scope.showAdvanceSearchMotorcycleDiv=true;return;}else if(categoryId==categoryIdConstant.SALE_RES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_RES);$scope.showAdvanceSearchSaleResDiv=true;return;}else if(categoryId==categoryIdConstant.SALE_COMM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_COMM);$scope.showAdvanceSearchSaleCommDiv=true;return;}else if(categoryId==categoryIdConstant.SALE_UNITS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_UNITS);$scope.showAdvanceSearchSaleUnitsDiv=true;return;}else if(categoryId==categoryIdConstant.SALE_LAND_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_SALE_LAND);$scope.showAdvanceSearchSaleLandDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_RES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_RES);$scope.showAdvanceSearchRentResDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_COMM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_COMM);$scope.showAdvanceSearchRentCommDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_ROOM_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_ROOM);$scope.showAdvanceSearchRentRoomDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_HOTEL_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_HOTEL);$scope.showAdvanceSearchRentHotelDiv=true;return;}
else if(categoryId==categoryIdConstant.RENT_SHORT_MONTHLY_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_RENT_SHORT_MONTHLY);$scope.showAdvanceSearchRentShortMonthlyDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BABY_ITEMS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BOOKS_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_BUSINESS_INDUSTRIAL_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CAMERA_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_CLOTHING_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COLLECTIBLES_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else if(categoryId==categoryIdConstant.CLASSIFIED_COMPUTER_NETWORKING_CATEGORY_ID){setSearchType(searchTypeConstant.ADVANCE_SEARCH_CLASSIFIED);$scope.showAdvanceSearchClassifiedDiv=true;return;}
else{$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;}}
function hideAdvanceSearchDiv(categoryId){$scope.showAdvanceSearchCarDiv=false;$scope.showAdvanceSearchCarPartsDiv=false;$scope.showAdvanceSearchBoatsDiv=false;$scope.showAdvanceSearchHeavyVehicleDiv=false;$scope.showAdvanceSearchMotorcycleDiv=false;$scope.showAdvanceSearchSaleResDiv=false;$scope.showAdvanceSearchSaleCommDiv=false;$scope.showAdvanceSearchSaleUnitsDiv=false;$scope.showAdvanceSearchSaleLandDiv=false;$scope.showAdvanceSearchRentResDiv=false;$scope.showAdvanceSearchRentCommDiv=false;$scope.showAdvanceSearchRentRoomDiv=false;$scope.showAdvanceSearchRentHotelDiv=false;$scope.showAdvanceSearchRentShortMonthlyDiv=false;$scope.showAdvanceSearchClassifiedDiv=false;}
function initializeYears(){if($scope.years.length==0){var currentYear=new Date().getFullYear();var range=[];for(var i=1900;i<currentYear+2;i++){range.push(i);}
$scope.years=range;$scope.yearMax=currentYear+1;}
return;}
$scope.forwardToDetailsPage=function(productId,categoryId,categoryLft,categoryRgt){dispatcherDetailsFactory.forwardToDetailsPage(productId,categoryId,categoryLft,categoryRgt);}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('RegistrationController',function($scope,$location,userFactory){console.log('RegisterController');$scope.regMessage="";$scope.regError=false;user={email:"",confirmEmail:"",password:"",confirmPassword:""};$scope.submit=function(isValid){if(isValid){userFactory.saveUser($scope.user).success(function(){console.log('success get');}).error(function(error){$scope.status='Unable to load customer data: ';});$scope.regMessage="Submitted "+user.email;$location.path('/success_registration');}else{$scope.regError=true;$scope.regMessage="There are still invalid fields below";return;}}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('SuccessAdController',function($scope,$state,$stateParams,categoryFactory,dispatcherDetailsFactory,dispatcherPostAdNextFactory){$scope.categoryId;(function init(){$scope.categoryId=$stateParams.categoryId;$scope.categoryLft=$stateParams.categoryLft;$scope.categoryRgt=$stateParams.categoryRgt;$scope.productId=$stateParams.productId;})();$scope.forwardToDetailsPage=function(productId,categoryId,categoryLft,categoryRgt){dispatcherDetailsFactory.forwardToDetailsPage(productId,categoryId,categoryLft,categoryRgt);}
$scope.forwardToPostAdNext=function(productId,categoryId,categoryLft,categoryRgt){dispatcherPostAdNextFactory.forwardToPostAdNext(productId,categoryId,categoryLft,categoryRgt);}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('AccountSettingsController',function($scope,$location,$state,$stateParams,$anchorScroll,$translate,userFactory,auth,$window,$q){(function init(){if(auth){if(auth.authenticated){findUserByUserId(auth.authenticatedUserId);}}})();$scope.updateUser=function(data,userId,columnName){userFactory.updateUserByColumnNameAndUserId(userId,columnName,data);}
$scope.checkInput=function(data,id){if(!data){return"This field is required";}};$scope.confirmPassword=function(confirmPassword,newPassword,id){if(!confirmPassword){return"This field is required";}
else if(newPassword!=confirmPassword){return"Password does not match";}}
$scope.checkOldPassword=function(data,id){var d=$q.defer();if(!data){return"This field is required!";}else{userFactory.isPasswordSame(auth.authenticatedUserId,data).success(function(data){if(data){d.resolve();}else{d.resolve("Wrong password")}});}
return d.promise;};function findUserByUserId(userId){userFactory.findUserByUserId(userId).success(function(data){$scope.user=data;});}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('AccountAdsController',function($scope,$location,$state,$stateParams,$anchorScroll,$translate,productFactory,auth,$window,promiseObj,dispatcherPostAdNextFactory){(function init(){if(promiseObj){if(promiseObj.data){$scope.products=promiseObj.data;}}})();$scope.deleteProduct=function(productId,index){if(confirm("Are you sure you want to delete Ad ref:"+productId)==true){$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.myPromise=productFactory.deleteProduct(productId).success(function(data){$scope.products.splice(index,1);});}}
$scope.forwardToPostAdNext=function(productId,categoryId,categoryLft,categoryRgt){dispatcherPostAdNextFactory.forwardToPostAdNext(productId,categoryId,categoryLft,categoryRgt);}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('AccountProfileController',function($scope,$location,$state,$stateParams,$anchorScroll,$translate,profileFactory,auth,$window,careerLevelEnglish,careerLevelSomali,fileUploaderFactory,flowFactory,$http,bucketName,$timeout){$scope.fileCV;$scope.fileImage;$scope.linkCVDownload;$scope.bucketOtherImage=bucketName.otherImage;$scope.existingImageObjectZero=flowFactory.create({singleFile:true});$scope.existingImageObjectOne=flowFactory.create({singleFile:true});(function init(){if($translate.use()==='so_SO'){$scope.constantCareerLevel=careerLevelSomali;}
else if($translate.use()==='en_US'){$scope.constantCareerLevel=careerLevelEnglish;}
if(auth){if(auth.authenticated){findProfileByUserId(auth.authenticatedUserId);}}})();$scope.submit=function(validForm){if(validForm){if($scope.profileExist==true){$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.promiseSubmit=profileFactory.updateProfile($scope.profile,auth.authenticatedUserId,$scope.fileCV,$scope.fileImage).success(function(result){$state.go("success_profile");return;});}
else if($scope.profileExist==false){$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);$scope.promiseSubmit=profileFactory.createNewProfile($scope.profile,auth.authenticatedUserId,$scope.fileCV,$scope.fileImage).success(function(result){$state.go("success_profile");return;});}}
console.log("form not valid");}
function findProfileByUserId(userId){profileFactory.findProfileByUserId(userId).success(function(data){if(data){$scope.profile=data;$scope.profileExist=true;if(data.imageName)
getImageFromAmazon(userId,bucketName.profileImage,data.imageName);if(data.cvName)
getImageFromAmazon(userId,bucketName.profileCV,data.cvName);}else{$scope.profileExist=false;}});}
$scope.fileCVUploadedSuccessfully=function(file,index){$scope.fileCV=file;}
$scope.fileImageUploadedSuccessfully=function(file,index){$scope.fileImage=file;}
$scope.removeProfileImageFile=function(){$scope.fileImage=null;}
$scope.removeProfileCVFile=function(){$scope.fileCV=null;}
function getImageFromAmazon(userId,bucket,fileName){switch(bucket){case bucketName.profileImage:$scope.promiseExistingImageObjectZero=$http.get(bucket+userId+'/'+fileName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"image/jpeg"});blob.name=fileName;$scope.existingImageObjectZero.addFile(blob);},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});break;case bucketName.profileCV:$scope.promiseExistingImageObjectOne=$http.get(bucket+userId+'/'+fileName,{responseType:"arraybuffer"}).success(function(data){$timeout(function(){var blob=new Blob([data],{type:"*"});blob.name=fileName;$scope.existingImageObjectOne.addFile(blob);$scope.linkCVDownload=bucket+userId+'/'+fileName;},0);}).error(function(data,status){$scope.postAdError=true;$scope.postAdErrorMessage='Error in uploading images';$window.scrollTo(0,angular.element(document.getElementById('div1')).offsetTop);});break;default:console.log("default case..");break;}}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('ForgotPasswordController',function($scope,$state,$translate,passwordFactory,$window,$state){$scope.showMessage=true;$scope.styleMessage=null;$scope.message=null;$scope.user={};(function init(){console.log("initialized");})();$scope.sendLostPasswordToken=function(isValidForm){if(isValidForm){passwordFactory.sendLostPasswordToken($scope.user.email).success(function(data){console.log("data returned"+data.message);$state.go('success_forgot_password');}).error(function(error){console.log("data returned"+error.message);$scope.showMessage=true;$scope.styleMessage="alert alert-danger";$scope.message=error.message;});}else{return;}}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('ResetPasswordController',function($scope,$state,$translate,passwordFactory,$window,$stateParams){$scope.showMessage=true;$scope.styleMessage=null;$scope.message=null;$scope.user={};(function init(){$scope.token=$stateParams.token;console.log("initialized:"+$stateParams.token);})();$scope.resetPassword=function(isValidForm){if(isValidForm){if($scope.user.password==$scope.user.confirmPassword){console.log("password matching..");passwordFactory.resetPassword($scope.token,$scope.user).success(function(data){if(data==true){console.log("data returned"+data);$state.go("success_reset_password");return;}}).error(function(error){console.log("data returned"+error.message);$scope.showMessage=true;$scope.styleMessage="alert alert-danger";$scope.message=error.message;});}}else{return;}}});var hashiApp=angular.module('hashiApp')
hashiApp.controller('AdminController',function($scope,$location,$state,$stateParams,$anchorScroll,$translate,productFactory,auth,$window,bucketName,dispatcherAdminDetailsFactory){$scope.productId;$scope.imageStatus;$scope.productPriority;$scope.styleMessage;$scope.message;$scope.showMessagePriorityForm;$scope.showMessageImageStatusForm;(function init(){})();$scope.updateImageStatusForProduct=function(isValid){if(!isValid){return;}
$scope.showMessagePriorityForm=false;$scope.showMessageImageStatusForm=false;$scope.showMessageViewProductForm=false;$scope.showMessageDeleteProductForm=false;$scope.myPromise1=productFactory.updateImageStatusForProduct($scope.productId,$scope.imageStatus).success(function(data){$scope.message="Success message";$scope.styleMessage="alert alert-success";$scope.showMessageImageStatusForm=true;}).error(function(response,status){if(status===401){console.log(status);$scope.message="Unauthorized";$scope.styleMessage="alert alert-danger";$scope.showMessageImageStatusForm=true;}
else{$scope.message=response.exception;$scope.styleMessage="alert alert-danger";$scope.showMessageImageStatusForm=true;}});};$scope.updatePriorityForProduct=function(isValid){if(!isValid){return;}
$scope.showMessagePriorityForm=false;$scope.showMessageImageStatusForm=false;$scope.showMessageViewProductForm=false;$scope.showMessageDeleteProductForm=false;$scope.myPromise2=productFactory.updatePriorityForProduct($scope.productId,$scope.productPriority).success(function(data){$scope.message="Success message";$scope.styleMessage="alert alert-success";$scope.showMessagePriorityForm=true;}).error(function(response,status){if(status===401){console.log(status);$scope.message="Unauthorized";$scope.styleMessage="alert alert-danger";$scope.showMessagePriorityForm=true;}
else{$scope.message=response.exception;$scope.showMessagePriorityForm=true;$scope.styleMessage="alert alert-danger";}});};$scope.viewProductDetails=function(isValid){if(!isValid){return;}
$scope.showMessagePriorityForm=false;$scope.showMessageImageStatusForm=false;$scope.showMessageViewProductForm=false;$scope.showMessageDeleteProductForm=false;$scope.myPromise3=productFactory.findProductWithUserByProductId($scope.productId).success(function(data){$scope.message="Success message";$scope.styleMessage="alert alert-success";$scope.showMessageViewProductForm=true;dispatcherAdminDetailsFactory.forwardToDetailsPage(data.productId,data.categoriesEntity.categoryId,data.categoriesEntity.lft,data.categoriesEntity.rgt);}).error(function(response,status){if(status===401){console.log(status);$scope.message="Unauthorized";$scope.styleMessage="alert alert-danger";$scope.showMessageViewProductForm=true;}
else{$scope.message=response.exception;$scope.showMessageViewProductForm=true;$scope.styleMessage="alert alert-danger";}});};$scope.deleteProduct=function(isValid){if(!isValid){return;}
$scope.showMessagePriorityForm=false;$scope.showMessageImageStatusForm=false;$scope.showMessageViewProductForm=false;$scope.showMessageDeleteProductForm=false;if(confirm("Are you sure you want to delete Ad ref:"+$scope.productId)==true){$scope.myPromise4=productFactory.deleteProduct($scope.productId).success(function(data){$scope.message="Success message";$scope.styleMessage="alert alert-success";$scope.showMessageDeleteProductForm=true;}).error(function(response,status){if(status===401){console.log(status);$scope.message="Unauthorized";$scope.styleMessage="alert alert-danger";$scope.showMessageDeleteProductForm=true;}
else{$scope.message=response.exception;$scope.showMessageDeleteProductForm=true;$scope.styleMessage="alert alert-danger";}});}}});var hashiApp=angular.module('hashiApp')
hashiApp.factory('dispatcherAdminDetailsFactory',function($location,$state,categoryRange,productFactory,categoryName){var dataFactory={};dataFactory.forwardToDetailsPage=function(productId,categoryId,categoryLft,categoryRgt){if(categoryId>0){if(categoryLft>=categoryRange.MOTOR_MIN&&categoryRgt<=categoryRange.MOTOR_MAX)
{if(categoryLft>=categoryRange.MOTOR_CAR_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_CAR});return;}
else if(categoryLft>=categoryRange.MOTOR_CAR_PARTS_MIN&&categoryRgt<=categoryRange.MOTOR_CAR_PARTS_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_CAR_PARTS});return;}
else if(categoryLft>=categoryRange.MOTOR_BOATS_MIN&&categoryRgt<=categoryRange.MOTOR_BOATS_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_BOATS});return;}
else if(categoryLft>=categoryRange.MOTOR_HEAVY_VEHICLE_MIN&&categoryRgt<=categoryRange.MOTOR_HEAVY_VEHICLE_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_HEAVY_VEHICLE});return;}
else if(categoryLft>=categoryRange.MOTOR_MOTORCYCLES_MIN&&categoryRgt<=categoryRange.MOTOR_MOTORCYCLES_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.MOTOR_MOTORCYCLES});return;}else{console.log('dispatcher_details_next not finding the root');}}else if(categoryLft>=categoryRange.PROPERTY_SALE_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_MAX){if(categoryLft>=categoryRange.PROPERTY_SALE_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_RES_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_RES});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_COMM_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_COMM});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_UNITS_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_UNITS_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_UNITS});return;}
else if(categoryLft>=categoryRange.PROPERTY_SALE_LAND_MIN&&categoryRgt<=categoryRange.PROPERTY_SALE_LAND_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_SALE_LAND});return;}
else{console.log('dispatcher_details_next not finding the root');}}else if(categoryLft>=categoryRange.PROPERTY_RENT_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_MAX){if(categoryLft>=categoryRange.PROPERTY_RENT_RES_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_RES_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_RES});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_COMM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_COMM_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_COMM});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_ROOM_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_ROOM_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_ROOM});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_SHORT_DAILY_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_SHORT_DAILY_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_SHORT_DAILY});return;}
else if(categoryLft>=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MIN&&categoryRgt<=categoryRange.PROPERTY_RENT_SHORT_MONTHLY_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.PROPERTY_RENT_SHORT_MONTHLY});return;}
else{console.log('dispatcher_details_next not finding the root RENT properties if. ');}}else if(categoryLft>=categoryRange.CLASSIFIED_MIN&&categoryRgt<=categoryRange.CLASSIFIED_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.CLASSIFIED});return;}else if(categoryLft>=categoryRange.COMMUNITY_MIN&&categoryRgt<=categoryRange.COMMUNITY_MAX){$state.go("admin_details",{productId:productId,categoryId:categoryId,categoryType:categoryName.COMMUNITY});return;}
else if(categoryLft>=categoryRange.JOB_MIN&&categoryRgt<=categoryRange.JOB_MAX){$state.go("details_job",{productId:productId,categoryId:categoryId,categoryType:categoryName.JOB});return;}
else{console.log('dispatcher_details_next not finding the root');}}}
return dataFactory;});